var Oe=Object.defineProperty;var qe=(t,s,a)=>s in t?Oe(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var J=(t,s,a)=>qe(t,typeof s!="symbol"?s+"":s,a);import{q as G,u as B,j as e,Q as Ae,a as F,b as Z,c as Ne,R as Ue}from"./tanstack-BjdLQ5hw.js";import{c as _e,r as o,u as W,L as K,f as De,R as se,O as xe,h as Me,i as Be,j as ze,k as We}from"./react-Dm8snE5z.js";import{c as Ge,i as Qe}from"./supabase-7q-5WrAP.js";import{d as z,F as h,A as ye,I,B as x,a as l,s as L,T as A,R as Ye,b as je,D as He,U as X,c as ke,e as ve,M as re,f as ie,g as Ve,h as we,i as Je,P as Ie,j as Xe,k as Ke,l as Ze,m as et,n as be,o as tt,p as st,q as at,r as nt,t as M,u as rt,v as it,w as ot,x as lt,y as ct,z as oe,C as dt,E as ut,G as mt,H as pt,J as ht,K as gt,L as ft,N as xt,O as yt,S as le,Q as Te,V as jt}from"./ant-lD42fTsz.js";import{R as kt,a as vt,P as wt,b as It,c as bt,d as Tt}from"./recharts-3qghCK3T.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();var Se,de=_e;Se=de.createRoot,de.hydrateRoot;var St={items_per_page:"/ стр.",jump_to:"Перейти",jump_to_confirm:"подтвердить",page:"Страница",prev_page:"Назад",next_page:"Вперед",prev_5:"Предыдущие 5",next_5:"Следующие 5",prev_3:"Предыдущие 3",next_3:"Следующие 3",page_size:"размер страницы"},Ct={locale:"ru_RU",today:"Сегодня",now:"Сейчас",backToToday:"Текущая дата",ok:"ОК",clear:"Очистить",month:"Месяц",year:"Год",timeSelect:"Выбрать время",dateSelect:"Выбрать дату",monthSelect:"Выбрать месяц",yearSelect:"Выбрать год",decadeSelect:"Выбрать десятилетие",yearFormat:"YYYY",dateFormat:"D-M-YYYY",dayFormat:"D",dateTimeFormat:"D-M-YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Предыдущий месяц (PageUp)",nextMonth:"Следующий месяц (PageDown)",previousYear:"Предыдущий год (Control + left)",nextYear:"Следующий год (Control + right)",previousDecade:"Предыдущее десятилетие",nextDecade:"Следущее десятилетие",previousCentury:"Предыдущий век",nextCentury:"Следующий век"};const Ce={placeholder:"Выберите время",rangePlaceholder:["Время начала","Время окончания"]},ue={lang:Object.assign({placeholder:"Выберите дату",yearPlaceholder:"Выберите год",quarterPlaceholder:"Выберите квартал",monthPlaceholder:"Выберите месяц",weekPlaceholder:"Выберите неделю",rangePlaceholder:["Начальная дата","Конечная дата"],rangeYearPlaceholder:["Начальный год","Год окончания"],rangeMonthPlaceholder:["Начальный месяц","Конечный месяц"],rangeWeekPlaceholder:["Начальная неделя","Конечная неделя"],shortWeekDays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],shortMonths:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"]},Ct),timePickerLocale:Object.assign({},Ce)},E="${label} не является типом ${type}",Pt={locale:"ru",Pagination:St,DatePicker:ue,TimePicker:Ce,Calendar:ue,global:{placeholder:"Пожалуйста выберите"},Table:{filterTitle:"Фильтр",filterConfirm:"OK",filterReset:"Сбросить",filterEmptyText:"Без фильтров",filterCheckall:"Выбрать все элементы",filterSearchPlaceholder:"Поиск в фильтрах",emptyText:"Нет данных",selectAll:"Выбрать всё",selectInvert:"Инвертировать выбор",selectNone:"Очистить все данные",selectionAll:"Выбрать все данные",sortTitle:"Сортировка",expand:"Развернуть строку",collapse:"Свернуть строку",triggerDesc:"Нажмите для сортировки по убыванию",triggerAsc:"Нажмите для сортировки по возрастанию",cancelSort:"Нажмите, чтобы отменить сортировку"},Tour:{Next:"Далее",Previous:"Назад",Finish:"Завершить"},Modal:{okText:"OK",cancelText:"Отмена",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Отмена"},Transfer:{titles:["",""],searchPlaceholder:"Поиск",itemUnit:"элем.",itemsUnit:"элем.",remove:"Удалить",selectAll:"Выбрать все данные",selectCurrent:"Выбрать текущую страницу",selectInvert:"Инвертировать выбор",removeAll:"Удалить все данные",removeCurrent:"Удалить текущую страницу"},Upload:{uploading:"Загрузка...",removeFile:"Удалить файл",uploadError:"При загрузке произошла ошибка",previewFile:"Предпросмотр файла",downloadFile:"Загрузить файл"},Empty:{description:"Нет данных"},Icon:{icon:"иконка"},Text:{edit:"Редактировать",copy:"Копировать",copied:"Скопировано",expand:"Раскрыть"},Form:{optional:"(необязательно)",defaultValidateMessages:{default:"Ошибка проверки поля ${label}",required:"Пожалуйста, введите ${label}",enum:"${label} должен быть одним из [${enum}]",whitespace:"${label} не может быть пустым",date:{format:"${label} не правильный формат даты",parse:"${label} не может быть преобразовано в дату",invalid:"${label} не является корректной датой"},types:{string:E,method:E,array:E,object:E,number:E,date:E,boolean:E,integer:E,float:E,regexp:E,email:E,url:E,hex:E},string:{len:"${label} должна быть ${len} символов",min:"${label} должна быть больше или равна ${min} символов",max:"${label} должна быть меньше или равна ${max} символов",range:"Длина ${label} должна быть между ${min}-${max} символами"},number:{len:"${label} должна быть равна ${len}",min:"${label} должна быть больше или равна ${min}",max:"${label} должна быть меньше или равна ${max}",range:"${label} должна быть между ${min}-${max}"},array:{len:"Количество элементов ${label} должно быть равно ${len}",min:"Количество элементов ${label} должно быть больше или равно ${min}",max:"Количество элементов ${label} должно быть меньше или равно ${max}",range:"Количество элементов ${label} должно быть между ${min} и ${max}"},pattern:{mismatch:"${label} не соответствует шаблону ${pattern}"}}},Image:{preview:"Предпросмотр"},QRCode:{expired:"QR-код устарел",refresh:"Обновить"}},U={user:"user",userAvatar:"userAvatar",checkLogin:"checkLogin",attachments:"attachments",attachmentsUrl:"attachmentsUrl",tasks:"tasks",completedTasks:"completedTasks",taskTypes:"taskTypes"};class S{constructor(s){J(this,"name");J(this,"message");J(this,"code");this.message=s.message,this.name=s.name,s.code&&(this.code=s.code)}}const v=Ge("https://bezykkplqcrsoettxmqn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJlenlra3BscWNyc29ldHR4bXFuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTAzMzUxMTUsImV4cCI6MjAyNTkxMTExNX0.vxAZ78i4fJs8x3WYn9W_vxxTMz8DiQuJngbP_upuz40"),H=t=>{if(t instanceof Error)throw new S(t);if(t!=null&&t.code)throw console.log("DataProvider?.checkApiError",t),t},Rt=t=>G({queryKey:[U.checkLogin,t],queryFn:async({queryKey:s,signal:a})=>{console.log("signal",a);const{data:n,error:r}=await v.from("users").select().eq("login",s[1]).abortSignal(a);if(r)throw new S({message:r.message,name:"Не удалось проверить логин"});return!!n.length}}),Ft=async t=>{const{data:s,error:a}=await v.from("users").update(t).eq("id",t.id).select();if(a)throw new S({message:a.message,name:"Не удалось обновить данные пользователя"});if(s)return s[0]},Et=t=>G({queryKey:[U.user,t],queryFn:async({queryKey:s,signal:a})=>{const{data:n,error:r}=await v.from("users").select().eq("id",s[1]).abortSignal(a);if(r)throw new S({message:r.message,name:"Не удалось получить данные пользователя"});return n[0]},enabled:!!t}),ae={checkLogin:Rt,updateUserInfo:Ft,getUserById:Et},$t=t=>G({queryKey:[U.attachments,t],queryFn:async({signal:s,queryKey:a})=>{const{data:n,error:r}=await v.from("attachments").select().eq("id",a[1]).abortSignal(s);if(r)throw new S({name:"Не удалось получить вложения",message:`${r.code}: ${r.message}`});return n[0]},select:s=>({fullPath:s.full_path,id:s.id,path:s.path,publicUrl:s.public_url}),enabled:!!t}),Lt=async(t,s)=>{const{error:a}=await v.from("attachments").delete().eq("id",t.id);if(a)throw new S({name:"Не удалось удалить вложения",message:`${a.code}: ${a.message}`});const{error:n}=await v.storage.from(s).remove([t.path]);if(n)throw new S({name:"Не удалось удалить файл из хранилища",message:`${n.name}: ${n.message}`})},Ot=async(t,s)=>{const{data:a,error:n}=await v.storage.from(s).upload(t.name,t);if(n)throw new S({name:"Не удалось сохранить вложения",message:`${n.name}: ${n.message}`});const{data:{publicUrl:r}}=v.storage.from(s).getPublicUrl(a.path);console.log("uploadedFile",a);const{error:i}=await v.from("attachments").insert([{id:a.id,path:a.path,full_path:a.fullPath,public_url:r||null}]).select();if(i)throw new S({name:"Не удалось получить вложения",message:`${i.code}: ${i.message}`});return{...a,publicUrl:r}},ne={getAttachmentById:$t,deleteAttachment:Lt,saveAttachment:Ot},me="sb-bezykkplqcrsoettxmqn-auth-token",Pe=o.createContext({user:null,isAuthCheking:!0,isUserLoading:!1,setUserId:()=>{},logOut:()=>{}}),qt=({children:t})=>{const[s,a]=o.useState(null),[n,r]=o.useState(!0),{data:i=null,isFetching:c}=B({...ae.getUserById(s),refetchOnWindowFocus:!1}),{data:d=null}=B({...ne.getAttachmentById(i==null?void 0:i.avatar_id)}),m=()=>{localStorage.removeItem(me),a(null)};o.useEffect(()=>{const j=localStorage.getItem(me);if(!j){r(!1);return}const{user:b}=JSON.parse(j);b.id&&(a(b.id),r(!1))},[]),o.useEffect(()=>{i&&!n&&r(!1)},[i,n]);const k=o.useMemo(()=>i?{...i,avatar:d||null}:null,[i,d]);return e.jsx(Pe.Provider,{value:{user:k,isAuthCheking:n,setUserId:a,isUserLoading:c,logOut:m},children:t})},At=new Ae,Nt={cssVar:!0,token:{fontSize:16,colorBgLayout:"none",colorLink:"#7CB2B0",colorBorder:"#D2D7E3",colorTextPlaceholder:"var(--gray-5)"},components:{Layout:{siderBg:"#CDE1E1"},Input:{colorBgBase:"none",colorBgContainer:"none",fontSize:16,borderRadius:0},Typography:{titleMarginBottom:"none",titleMarginTop:"none"},Upload:{colorInfoText:"var(--gray-5)"}}},C={REQUIRED:"Поле обязательно",PASSWORD_DUPLICATE:"Пароли должны совпадать",MIN_LENGTH:t=>`Минимальная длина ${t} символов`,MAX_LENGTH:t=>`Максимальная длина ${t} символов`,CYRILLIC:"Недопустимые символы,только кирилица"},Ut=14,_t=z().subtract(Ut,"year"),Dt=z(),pe=5,he=25,Mt="Логин уже занят",T={SIGN_IN:"/sign-in",SIGN_UP:"/sign-up",RESET_PASSWORD:"/reset-password",UPDATE_PASSWORD:"/update-password",BASE:"/",USER:"/user",CHECK_LOGIN:"/check-login",STATISTIC:"/statistic",TASKS:"/tasks",LOGOUT:"/logout",INFO:"/info"},Bt="http://localhost:5173/update-password",zt=async({email:t,password:s})=>{const{data:a,error:n}=await v.auth.signInWithPassword({email:t,password:s});return H(n),a},Wt=async({email:t,password:s})=>{const{data:a,error:n}=await v.auth.signUp({email:t,password:s});if(Qe(n))throw new S({name:"Недопустимый пароль",message:n.message});H(n);const{data:r,error:i}=await v.from("users").upsert({id:a.user.id,login:a.user.email,email:a.user.email});return H(i),r},Gt=async t=>{const{data:s,error:a}=await v.auth.resetPasswordForEmail(t,{redirectTo:Bt});return H(a),s},Qt=async t=>{const{data:s,error:a}=await v.auth.updateUser({password:t});return H(a),s},ee={signIn:zt,signUp:Wt,resetPassword:Gt,updatePassword:Qt},D=()=>o.useContext(Pe),ge=()=>{const{setUserId:t}=D(),s=W(),a=F({mutationFn:ee.signIn,onSuccess:r=>{t(r.user.id),s(T.BASE)}}),n=r=>{a.mutate({email:r.email,password:r.password})};return e.jsxs(e.Fragment,{children:[e.jsxs(h,{name:"sign-in",layout:"vertical",style:{width:"100%"},onFinish:n,children:[!!a.error&&e.jsx(ye,{message:a.error.message||"",type:"error"}),e.jsx(h.Item,{name:"email",label:"Почта пользователя",rules:[{required:!0,message:C.REQUIRED}],children:e.jsx(I,{size:"large",type:"email"})}),e.jsx(h.Item,{name:"password",label:"Пароль",rules:[{required:!0,message:C.REQUIRED}],children:e.jsx(I.Password,{size:"large",type:"password"})}),e.jsx(h.Item,{style:{textAlign:"center"},children:e.jsx(x,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:a.isPending,children:"Войти"})})]}),e.jsxs(l,{className:"sign-in-actions",align:"center",justify:"space-between",children:[e.jsx(K,{to:T.RESET_PASSWORD,children:"Забыли пароль ?"}),e.jsx(K,{to:T.SIGN_UP,children:"Регистрация"})]})]})},Yt=()=>{const t=W(),s=De(),a=F({mutationFn:ee.signUp,onSuccess:()=>{L.success("Вы успешно зарегестрированы войдите в систему"),t(T.BASE)}});return e.jsxs(h,{layout:"vertical",style:{width:"100%"},onFinish:a.mutate,disabled:a.isPending,children:[!!a.error&&e.jsx(ye,{style:{margin:"10px 0"},message:s.message||"",type:"error"}),e.jsx(h.Item,{name:"email",label:"Почта",rules:[{required:!0,message:C.REQUIRED}],children:e.jsx(I,{size:"large",type:"email"})}),e.jsx(h.Item,{name:"password",label:"Пароль",rules:[{required:!0,message:C.REQUIRED}],children:e.jsx(I.Password,{size:"large",type:"password"})}),e.jsx(h.Item,{name:"passwordRepeat",dependencies:["password"],label:"Повторите пароль",rules:[{required:!0,message:C.REQUIRED},({getFieldValue:n})=>({validator(r,i){return!i||n("password")===i?Promise.resolve():Promise.reject(new Error(C.PASSWORD_DUPLICATE))}})],children:e.jsx(I.Password,{size:"large",type:"password"})}),e.jsx(h.Item,{style:{textAlign:"center"},children:e.jsx(x,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:a.isPending,children:"Зарегестрироваться"})}),e.jsx(l,{align:"center",justify:"center",children:e.jsx(K,{to:T.SIGN_IN,children:"К форме аторизации"})})]})},Ht=()=>{const t=F({mutationFn:ee.resetPassword,onSuccess:()=>{L.success("Письмо отправлено на почту")}});return console.log("resetPasswordMutation.data",t.data),e.jsxs(e.Fragment,{children:[t.data?e.jsx(A.Title,{level:2,style:{textAlign:"center",marginBottom:"1rem"},children:"Письмо отправлено на email"}):e.jsxs(h,{name:"sign-in",layout:"vertical",style:{width:"100%"},onFinish:({email:s})=>t.mutate(s),children:[e.jsx(h.Item,{name:"email",label:"Почта пользователя",rules:[{required:!0,message:C.REQUIRED}],children:e.jsx(I,{size:"large",type:"email"})}),e.jsx(h.Item,{style:{textAlign:"center"},children:e.jsx(x,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:t.isPending,children:"Сбросить пароль"})})]}),e.jsx(l,{align:"center",justify:"center",children:e.jsx(K,{to:T.SIGN_IN,children:"К форме аторизации"})})]})},Vt=(t,s)=>{const a=new FileReader;a.addEventListener("load",()=>s(a.result)),a.readAsDataURL(t)},Re=t=>{const s=t.type==="image/jpeg"||t.type==="image/png";if(!s)return"Загрузить можно только файлы в формате: jpeg, png";const a=t.size/1024/1024<2;return a?s&&a:"Файл должен быть меньше 2MB"},Jt="DD.MM.YYYY",Xt=1e3,Fe=60*Xt,Ee=(t,s)=>{if(t===s)return!0;if(typeof t!="object"&&typeof t!="function"||typeof s!="object"&&typeof s!="function")return!1;if(t===null||s===null)return t===s;const a=Object.keys(t),n=Object.keys(s);if(a.length!==n.length)return!1;for(let r of a)if(!n.includes(r)||!Ee(t[r],s[r]))return!1;return!0},Kt=()=>{const{user:t}=D(),s=Z(),[a,n]=o.useState(!1),[r,i]=o.useState(null),[c,d]=o.useState(!1),[m]=h.useForm(),k=o.useRef(Zt),j=F({mutationFn:y=>ae.updateUserInfo({...y,id:t.id}),onSuccess:(y,f)=>{s.setQueryData([U.user,t==null?void 0:t.id],{...t,...f})}}),b=F({mutationFn:async y=>ne.deleteAttachment(y,"avatar")}),p=F({mutationFn:async y=>ne.saveAttachment(y,"avatar")});o.useEffect(()=>{var y;k.current={login:(t==null?void 0:t.login)||"",birthday:z(t==null?void 0:t.birthdate),surname:(t==null?void 0:t.surname)||"",name:(t==null?void 0:t.name)||"",patronymic:(t==null?void 0:t.patronymic)||"",avatar:(t==null?void 0:t.avatar)||null},(y=t==null?void 0:t.avatar)!=null&&y.publicUrl&&i(t.avatar.publicUrl),m.setFieldsValue(k.current)},[t,m]);const g=async(y,f)=>{if(f===(t==null?void 0:t.login))return Promise.resolve();try{return await s.fetchQuery(ae.checkLogin(f))?Promise.reject(Mt):Promise.resolve()}catch{return Promise.reject("При проверке логина произошла ошибка")}},R=y=>{d(!Ee(y,k.current))},u=({file:y})=>{y&&(n(!0),m.setFieldValue("avatar",y),Vt(y,f=>{n(!1),i(f)}))},w=()=>{m.setFieldValue("avatar",""),i(null),d(!0)},O=m.getFieldsError().filter(({errors:y})=>y.length).length>0,Q=async()=>{const y=t==null?void 0:t.avatar,f=m.getFieldValue("avatar");return y&&(f instanceof File||!f)&&await b.mutateAsync(y),f instanceof File?await p.mutateAsync(f):null};return{isAvatarLoading:a,checkDirty:R,avatarUrl:r,isFormDirty:c,form:m,updateUser:async y=>{const{avatar:f,..._}=y;let q;return f!==(t==null?void 0:t.avatar)?q=await Q():q=(t==null?void 0:t.avatar)||null,j.mutate({..._,avatar_id:(q==null?void 0:q.id)||null})},handleChangeAvatar:u,deleteAvatar:w,checkLogin:g,updateAvatar:Q,hasErrors:O,isFormSubmitting:j.isPending||p.isPending||b.isPending}},Zt={login:"",birthday:null,surname:"",name:"",patronymic:"",avatar:null},{confirm:es}=re,ts=({onCancel:t})=>{const{form:s,updateUser:a,checkDirty:n,isAvatarLoading:r,avatarUrl:i,isFormDirty:c,handleChangeAvatar:d,deleteAvatar:m,checkLogin:k,isFormSubmitting:j}=Kt(),b=u=>{a(u).then(()=>{L.success("Данные успешно сохранены"),t()}).catch(()=>{L.error("Ошибка при сохранении данных")})},p=e.jsx(x,{style:{border:0,background:"none"},type:"text",children:e.jsx(l,{vertical:!0,align:"center",justify:"center",children:r?e.jsx(Ye,{}):e.jsxs(A.Paragraph,{type:"secondary",style:{marginTop:8},children:[e.jsx(je,{style:{color:"var(--gray-7)"}})," Загрузить"]})})}),g=()=>{c?es({title:"Закрыть окно ?",content:"Несохраненные изменения будут утеряны.",okText:"Да",cancelText:"Нет",onOk:t}):t()},R=u=>{const w=Re(u),O=typeof w!="string";return O||L.error(w),O};return e.jsxs(h,{onFinish:b,labelAlign:"left",layout:"vertical",labelWrap:!0,disabled:j,form:s,onValuesChange:(u,w)=>n(w),size:"large",style:{position:"relative",maxWidth:"600px"},children:[e.jsxs(l,{align:"center",children:[e.jsxs(l,{vertical:!0,flex:1,children:[e.jsx(h.Item,{label:"Логин",name:"login",wrapperCol:{span:22},validateTrigger:["onBlur","onChange"],validateFirst:!0,rules:[{required:!0,message:C.REQUIRED},{min:pe,message:C.MIN_LENGTH(pe)},{max:he,message:C.MAX_LENGTH(he)},{validateTrigger:["onBlur"],validator:k}],children:e.jsx(I,{placeholder:"LUKA"})}),e.jsx(h.Item,{label:"Дата рождения",name:"birthday",wrapperCol:{span:22},rules:[{required:!0,message:C.REQUIRED,type:"date"}],children:e.jsx(He,{style:{width:"100%"},placeholder:"06.06.0006",format:Jt,maxDate:Dt,minDate:_t})})]}),e.jsxs(h.Item,{name:"avatar",valuePropName:"fileList[0]",style:{position:"relative"},children:[e.jsx(X,{className:"person-form-upload",name:"avatar",listType:"picture-card",showUploadList:!1,beforeUpload:R,customRequest:d,disabled:!!i,children:i?e.jsx("div",{style:{margin:"4px",borderRadius:"4px",overflow:"hidden"},children:e.jsx(ke,{height:140,style:{objectFit:"cover"},src:i,preview:{toolbarRender:()=>null}})}):p}),i&&e.jsx(x,{style:{position:"absolute",bottom:-32,right:0},type:"text",size:"small",onClick:m,icon:e.jsx(ve,{})})]})]}),e.jsx(h.Item,{label:"Фамилия",name:"surname",rules:[{pattern:/^[\s\u0400-\u04FF]+$/,message:C.CYRILLIC}],children:e.jsx(I,{placeholder:"Лукавый"})}),e.jsx(h.Item,{label:"Имя",name:"name",rules:[{pattern:/^[\s\u0400-\u04FF]+$/,message:C.CYRILLIC}],children:e.jsx(I,{placeholder:"Лука"})}),e.jsx(h.Item,{label:"Отчество",name:"patronymic",rules:[{pattern:/^[\s\u0400-\u04FF]+$/,message:C.CYRILLIC}],children:e.jsx(I,{placeholder:"Лукич"})}),e.jsxs(l,{gap:16,justify:"end",children:[e.jsx(x,{type:"primary",htmlType:"submit",disabled:!c,children:"Сохранить"}),e.jsx(x,{type:"default",onClick:g,children:"Отмена"})]})]})};function ss({hideContainer:t}){var i;const[s,a]=o.useState(!1),{user:n}=D(),r=()=>{t(),a(!0)};return e.jsxs(ie.Ribbon,{text:e.jsx(A,{children:"Новичок"}),children:[e.jsxs(l,{vertical:!0,gap:16,className:"acc-container",children:[e.jsxs(l,{gap:16,children:[e.jsx(Ve,{shape:"square",size:64,gap:8,src:(i=n==null?void 0:n.avatar)==null?void 0:i.publicUrl,icon:e.jsx(we,{})}),e.jsxs(l,{vertical:!0,gap:16,children:[e.jsx(A,{children:n==null?void 0:n.login}),e.jsx(A,{children:n==null?void 0:n.email}),e.jsx(A,{children:[n==null?void 0:n.surname,n==null?void 0:n.name].filter(Boolean).join(" ")})]})]}),e.jsx(x,{className:"acc-edit-button",icon:e.jsx(Je,{}),size:"large",type:"text",onClick:r})]}),e.jsx(re,{open:s,closable:!1,footer:null,centered:!0,destroyOnClose:!0,title:"Реадктирование данных профиля",children:e.jsx(ts,{onCancel:()=>{a(!1)}})})]})}const as={name:"",email:"",messubject:"",description:""},ns=({close:t,isOpen:s})=>{const[a]=h.useForm(),[n,r]=se.useState([]),[i,c]=se.useState(""),[d,m]=se.useState(!1),k=F({mutationFn:rs,onSuccess:()=>{L.success("Обращение успешно отправлено"),a.resetFields(),r([]),t()},onError:()=>{L.error("Не удалось отправить обращение")}}),j=u=>{const w=Re(u);return console.log("result",w),typeof w=="string"?(L.error(w+":"+u.name),X.LIST_IGNORE):!0},b=({file:u})=>{console.log("handleUploadChange",n),r([...n,u])},p=async u=>{console.log("handlePreview",u),!u.url&&!u.preview&&u.originFileObj&&(u.preview=URL.createObjectURL(u.originFileObj)),c(u.url||u.preview||URL.createObjectURL(u)),m(!0)},g=u=>{const w={...u,attachments:n.map(O=>O.originFileObj).filter(Boolean)};k.mutate(w)},R=()=>{c(""),r([]),t()};return e.jsx(re,{title:"Форма обратной связи",open:s,onCancel:R,destroyOnClose:!0,footer:null,className:"feed-back-modal",children:e.jsxs(h,{name:"feedback_form",layout:"vertical",onFinish:g,form:a,initialValues:as,size:"large",children:[e.jsxs(l,{justify:"space-between",gap:16,children:[e.jsxs(l,{vertical:!0,flex:1,children:[e.jsx(h.Item,{label:"Имя",name:"name",rules:[{required:!0}],children:e.jsx(I,{})}),e.jsx(h.Item,{label:"Email",name:"email",validateTrigger:["onBlur"],rules:[{required:!0,message:""},{required:!0,type:"email",message:"Введен некоретный email"}],children:e.jsx(I,{})}),e.jsx(h.Item,{label:"Тема",name:"subject",rules:[{required:!0,message:"Введите тему"},{min:6,message:"Тема должна быть не менее 6 символов"}],children:e.jsx(I,{})})]}),e.jsx(l,{flex:1,children:e.jsx(h.Item,{style:{width:"100%"},label:"Описание",name:"description",rules:[{required:!0,message:"Введите описание"},{min:10,message:"Описание должно быть не менее 10 символов"}],children:e.jsx("div",{style:{position:"relative"},children:e.jsx(I.TextArea,{rows:7,style:{resize:"none",paddingBottom:40}})})})})]}),n.length>0&&e.jsx(X,{fileList:n,className:"feedback-attachments",onRemove:u=>{const w=n.indexOf(u),O=n.slice();O.splice(w,1),r(O)},onPreview:p,listType:"text"}),i&&e.jsx(ke,{style:{display:"none",height:0},src:i,preview:{visible:d,onVisibleChange:u=>m(u),destroyOnClose:!0,toolbarRender:()=>null}}),e.jsxs(l,{children:[e.jsx(X,{beforeUpload:j,fileList:n,multiple:!0,maxCount:5,accept:".jpeg,.jpg,.png",showUploadList:!1,customRequest:b,children:e.jsx(x,{icon:e.jsx(je,{}),type:"text"})}),e.jsxs(l,{style:{marginLeft:"auto"},gap:8,children:[e.jsx(x,{onClick:R,children:"Отмена"}),e.jsx(x,{type:"primary",htmlType:"submit",loading:k.isPending,children:"Отправить"})]})]})]})})},rs=async t=>(console.log("sendFeedback",t),await new Promise(s=>setTimeout(s,1e3)),Math.random()>.3?Promise.resolve():Promise.reject(new Error("Ошибка сервера"))),is=()=>{const{logOut:t}=D(),[s,a]=o.useState(!1),[n,r]=o.useState(!1),i=W();return e.jsxs(l,{vertical:!0,justify:"space-between",className:"menu-wrapper",children:[e.jsxs("div",{className:"user-button-wrapper",children:[e.jsx(x,{type:"text",icon:e.jsx(we,{size:24}),onClick:()=>a(!0)}),e.jsx(Ie,{placement:"bottomLeft",content:e.jsx(ss,{hideContainer:()=>a(!1)}),overlayInnerStyle:{padding:0},arrow:!1,open:s,trigger:"click",onOpenChange:c=>a(c),children:e.jsx("div",{className:"menu-point-popover"})})]}),e.jsxs(l,{vertical:!0,justify:"space-between",style:{height:"100%",marginTop:"0.4rem"},children:[e.jsxs(l,{vertical:!0,gap:"0.5rem",children:[e.jsx(x,{type:"text",icon:e.jsx(Xe,{size:24}),title:"Статистика",onClick:()=>{i(T.STATISTIC)}}),e.jsx(x,{icon:e.jsx(Ke,{size:24}),onClick:()=>i(T.INFO),type:"text",title:"О приложении"})]}),e.jsxs(l,{vertical:!0,children:[e.jsx(x,{icon:e.jsx(Ze,{size:24}),onClick:()=>r(!0),type:"text"}),e.jsx(x,{type:"text",icon:e.jsx(et,{size:24}),title:"Выход",onClick:t})]})]}),e.jsx(ns,{close:()=>r(!1),isOpen:n})]})},os=()=>e.jsxs(l,{gap:"0",align:"center",justify:"space-between",style:{width:"100%",height:"100%"},children:[e.jsx(is,{}),e.jsx(xe,{})]});var $=(t=>(t.active="active",t.complete="complete",t.new="new",t))($||{});const ls=()=>G({queryKey:[U.taskTypes],queryFn:async({signal:t})=>{const{data:s,error:a}=await v.from("task_types").select("*").abortSignal(t);if(a)throw new S({name:"Не удалось получить типы задач",message:`${a.code}: ${a.message}`});return s}}),cs=t=>G({queryKey:[U.tasks,t],queryFn:async({signal:s,queryKey:a})=>{const{data:n,error:r}=await v.from("tasks").select("*").eq("author_id",a[1]).abortSignal(s);if(r)throw new S({name:"Не удалось список задач",message:`${r.code}: ${r.message}`});return n}}),ds=(t,s)=>G({queryKey:[U.completedTasks,t,s],queryFn:async({signal:a,queryKey:n})=>{const r=v.from("tasks").select("*").eq("author_id",n[1]).eq("status_id",$.complete).order("created_at",{ascending:!1});s&&r.eq("type_id",s);const{data:i,error:c}=await r.abortSignal(a);if(c)throw new S({name:"Не удалось список задач",message:`${c.code}: ${c.message}`});return i}}),us=async({authorId:t,task:s,taskStatus:a,typeId:n})=>{const{data:r,error:i}=await v.from("tasks").insert({author_id:t,type_id:n,text:s,status_id:a}).select();if(i)throw new S({name:"Не удалось создать задачу",message:`${i.code}: ${i.message}`});return r[0]},ms=async t=>{const{error:s}=await v.from("tasks").delete().eq("id",t);if(s)throw new S({name:"Не удалось удалить задачу",message:`${s.code}: ${s.message}`});return t},ps=async({id:t,...s})=>{const{data:a,error:n}=await v.from("tasks").update({...s}).eq("id",t).select();if(n)throw new S({name:"Не удалось обновить задачу",message:`${n.code}: ${n.message}`});return a[0]},hs=async t=>{const{error:s}=await v.from("tasks").update({status_id:"complete"}).eq("author_id",t).eq("done",!0).lt("created_at",z().startOf("day").format("YYYY-MM-DD"));if(s)throw new S({name:"Не удалость изменить статус задач на завершенные",message:`${s.code}: ${s.message}`})},gs=async t=>{const{error:s}=await v.from("tasks").update({created_at:z().toISOString(),important:!0}).eq("author_id",t).eq("status_id",$.active).or("done.is.null,done.eq.false").lt("created_at",z().startOf("day").format("YYYY-MM-DD"));if(s)throw new S({name:"Не удалость изменить статус задач на завершенные",message:`${s.code}: ${s.message}`})},N={getTaskTypes:ls,getUserTasks:cs,getUserCompletedTasks:ds,createTask:us,deleteTask:ms,updateTask:ps,setTasksToComplete:hs,updateActiveTaskDate:gs};var P=(t=>(t.soul="soul",t.health="health",t.social="social",t.life="life",t.growth="growth",t.mind="mind",t.rest="rest",t))(P||{});const fs=()=>{const{user:t}=D(),[s,a]=o.useState(!1),[n,r]=o.useState(),i=o.useMemo(()=>(t==null?void 0:t.id)||"",[t==null?void 0:t.id]),{mutate:c}=F({mutationFn:p=>N.setTasksToComplete(p),onSuccess:()=>{a(!0)}}),{mutate:d}=F({mutationFn:p=>N.updateActiveTaskDate(p)}),{data:m,isLoading:k}=B({...N.getTaskTypes(),refetchOnWindowFocus:!1,refetchOnMount:!1}),{data:j=[],isLoading:b}=B({...N.getUserTasks(i),refetchIntervalInBackground:!0,refetchInterval:5*Fe,refetchOnWindowFocus:!1,enabled:!!s});return o.useEffect(()=>{i&&!s&&(c(i),d(i))},[i,s,c,d]),o.useEffect(()=>{if(!(m!=null&&m.length))return;const p={};m.forEach(g=>{p[g.id]||(p[g.id]={data:[],stats:{inWork:0,done:0},label:g.title})}),j.forEach(g=>{p[g.type_id].data.push(g),g.status_id===$.active&&(p[g.type_id].stats.inWork+=1,g.done&&(p[g.type_id].stats.done+=1))}),r(p)},[j,m]),{taskTypesIsLoading:k,taskTypes:m,userTasks:j,userTasksIsLoading:b,taskGroups:n,userId:i}};function xs(t,s){const[a,n]=o.useState(t);return o.useEffect(()=>{const r=setTimeout(()=>{n(t)},s);return()=>{clearTimeout(r)}},[t,s]),a}const ys=({task:t})=>{const{done:s,priority:a=0}=t,[n,r]=o.useState(t.text),i=o.useRef(!1),c=o.useRef(null),d=xs(n,700),m=Z(),{user:k}=D(),j=F({mutationFn:N.deleteTask,onSuccess:f=>{m.setQueryData([U.tasks,k.id],_=>_==null?void 0:_.filter(q=>q.id!==f))}}),{mutate:b,isPending:p}=F({mutationFn:N.updateTask,onSuccess:f=>{m.setQueryData([U.tasks,k.id],_=>{const q=[..._??[]],te=q.findIndex(Le=>Le.id===f.id);return te!==-1&&(q[te]={...q[te],...f}),[...q]})}}),g=()=>{j.mutate(t.id,{onError:f=>{L.error(f.message)}})},R=o.useCallback(f=>{console.log("updateTask",f),b(f)},[b]),u=()=>{R({...t,done:!t.done})},w=()=>{R({...t,important:!t.important})},O=()=>{R({...t,status_id:t.status_id===$.active?$.new:$.active,done:!1,created_at:new Date().toISOString()})},Q=j.isPending||p,ce=t.important?tt:st;o.useEffect(()=>{var f;i.current&&((f=c.current)==null||f.focus()),t.text!==d&&R({...t,text:d})},[d,t,R]);const y=()=>{switch(t.status_id){case $.active:return e.jsx(I,{ref:c,className:M("task-input",!!a&&`task-input--prioriry-${a}`,{"task-input--done":!!s,"task-input--has-prioriry ":!!a,"task-input--important ":!!t.important}),onFocus:()=>{i.current=!0},onBlur:()=>{i.current=!1},value:n,disabled:Q,onChange:f=>{r(f.target.value)},prefix:e.jsx(x,{icon:e.jsx(rt,{className:M("task-icon-check-online",s&&"task-icon-check-online--checked")}),type:"text",onClick:u}),suffix:e.jsxs(l,{className:"task-input-actions",justify:"end",children:[e.jsx(x,{icon:e.jsx(ce,{}),type:"text",onClick:w}),e.jsx(x,{icon:e.jsx(be,{}),type:"text"}),e.jsx(x,{icon:e.jsx(it,{}),onClick:O,type:"text"}),e.jsx(x,{disabled:j.isPending,className:"action-delete",icon:e.jsx(ve,{}),onClick:g,type:"text"})]})});case $.new:return e.jsx(I,{className:"task-input",value:n,disabled:Q,onChange:f=>{r(f.target.value)},prefix:e.jsx(x,{icon:e.jsx(at,{}),onClick:O,type:"text"}),suffix:e.jsx(x,{icon:e.jsx(nt,{}),onClick:g,type:"text"})})}};return e.jsx(l,{justify:"space-between",align:"center",gap:16,children:y()})},js=({text:t,author_id:s,type_id:a,created_at:n})=>{const r=Z(),i=F({mutationFn:N.createTask}),c=()=>{i.mutate({authorId:s,task:t,taskStatus:$.new,typeId:a},{onSuccess:async()=>{await r.invalidateQueries({queryKey:[U.tasks,s]}),L.success("Задача добавлена в 'Запланированные' ")}})};return e.jsx(l,{justify:"space-between",align:"center",gap:16,className:"task-completed-row",children:e.jsx(I,{className:"task-input",value:t,readOnly:!0,prefix:e.jsx("span",{children:z(n).format("DD.MM")}),suffix:e.jsx(x,{onClick:c,icon:e.jsx(be,{}),shape:"circle",type:"text",loading:i.isPending})})})},V={soul:{id:P.soul,title:"Дух",icon:ot,info:"Дух : Lorem ipsum dolor sit amet consectetur adipisicing elit. Hic magni aliquam deserunt suscipit odit similique quos natus cum quia facilis nemo sit, repellendus culpa maiores quo minima eius non? Perferendis?"},health:{id:P.health,title:"Здоровье",icon:lt,info:"Здоровье: Lorem ipsum dolor sit amet consectetur adipisicing elit. Hic magni aliquam deserunt suscipit odit similique quos natus cum quia facilis nemo sit, repellendus culpa maiores quo minima eius non? Perferendis?"},social:{id:P.social,title:"Социум",icon:ct,info:"Социум: Lorem ipsum dolor sit amet consectetur adipisicing elit. Hic magni aliquam deserunt suscipit odit similique quos natus cum quia facilis nemo sit, repellendus culpa maiores quo minima eius non? Perferendis?"},life:{id:P.life,title:"Быт",icon:oe,info:"Быт: Lorem ipsum dolor sit amet consectetur adipisicing elit. Hic magni aliquam deserunt suscipit odit similique quos natus cum quia facilis nemo sit, repellendus culpa maiores quo minima eius non? Perferendis?"},growth:{id:P.growth,title:"Развитие",icon:dt,info:"Развитие: Lorem ipsum dolor sit amet consectetur adipisicing elit. Hic magni aliquam deserunt suscipit odit similique quos natus cum quia facilis nemo sit, repellendus culpa maiores quo minima eius non? Perferendis?"},mind:{id:P.mind,title:"Интеллект",icon:ut,info:"Интеллект: Lorem ipsum dolor sit amet consectetur adipisicing elit. Hic magni aliquam deserunt suscipit odit similique quos natus cum quia facilis nemo sit, repellendus culpa maiores quo minima eius non? Perferendis?"},rest:{id:P.rest,title:"Отдых",icon:mt,info:"Отдых: Lorem ipsum dolor sit amet consectetur adipisicing elit. Hic magni aliquam deserunt suscipit odit similique quos natus cum quia facilis nemo sit, repellendus culpa maiores quo minima eius non? Perferendis?"}},ks=Object.keys(V).map(t=>V[t]),fe=({title:t,total:s=0,complite:a=0,tasks:n,taskStatus:r,typeId:i})=>{const[c,d]=o.useState(!1),m=Z(),[k]=h.useForm(),{user:j}=D(),{mutate:b,isPending:p}=F({mutationFn:async u=>await N.createTask(u),onSuccess(u){m.setQueryData([U.tasks,j.id],w=>[...w,u])}}),g=r===$.active,R=({task:u})=>{b({task:u,taskStatus:r,typeId:i,authorId:j.id},{onError:w=>{L.error(w.name)},onSuccess:async()=>{k.resetFields()}})};return e.jsxs(l,{vertical:!0,className:M({"task-field-wrapper":!0,"task-field-wrapper--active":g}),children:[e.jsx(ie,{count:a?`${a}/${s}`:s,offset:[20,12],className:M({"task-field-badge":!0,"task-field-badge--active":g}),children:e.jsxs(A.Text,{type:"secondary",children:[t,":"]})}),e.jsx(h,{onFinish:R,form:k,className:"task-field-form",children:e.jsx(h.Item,{noStyle:!0,name:"task",children:e.jsx(l,{onClick:()=>d(!0),onBlur:()=>d(!1),children:e.jsx(I,{disabled:p,className:M("task-input","task-input-create",g&&"task-input-create--active"),placeholder:c?"":"Создать задачу",prefix:c?e.jsx(pt,{style:{fontSize:16}}):e.jsx(ht,{})})})})}),e.jsx("div",{className:"task-field-content",children:n.map(u=>e.jsx(ys,{task:u},u.id))})]})},vs=({active:t=!1,tasks:s=[],type:a,userId:n})=>{const[r,i]=o.useState(!1),{data:c=[],isFetching:d}=B({...N.getUserCompletedTasks(n,a),enabled:r});if(o.useEffect(()=>{!t&&r&&i(!1)},[t,r]),!t||!a)return;const m=V[a],{activeTasks:k=[],newTasks:j=[]}=s.reduce((p,g)=>(g.status_id==="new"&&p.newTasks.push(g),g.status_id==="active"&&p.activeTasks.push(g),p),{newTasks:[],activeTasks:[]}),b=k.filter(({done:p})=>p).length;return e.jsxs(l,{className:"task-type-panel",vertical:!0,align:"start",gap:8,children:[e.jsxs(l,{className:"task-type-panel__content",vertical:!0,flex:1,children:[e.jsx(fe,{title:"В работе",complite:b,total:k.length,taskStatus:$.active,tasks:k,typeId:a}),e.jsx(fe,{title:"Запланированы",total:j.length,taskStatus:$.new,tasks:j,typeId:a})]}),e.jsxs(l,{className:"task-type-panel__float-buttons",vertical:!0,gap:4,children:[m&&e.jsx(Ie,{content:e.jsx("div",{style:{width:500},children:m.info}),title:"Разяснение в помощь о текуших задач",children:e.jsx(x,{icon:e.jsx(gt,{size:24}),size:"small",type:"text",shape:"circle"})}),e.jsx(x,{icon:r?e.jsx(ft,{}):e.jsx(xt,{}),title:"Показать выполненные",size:"small",type:"text",shape:"circle",onClick:p=>{p.stopPropagation(),i(!r)}})]}),e.jsx(yt,{title:e.jsxs(e.Fragment,{children:[e.jsx(A.Text,{type:"secondary",children:" Звершенные задачи : "}),e.jsx(ie,{count:c.length||"0_-",color:"cyan"})]}),placement:"right",onClose:p=>{p.stopPropagation(),i(!1)},open:r,getContainer:!1,styles:{mask:{background:"none"},header:{padding:"0.5rem 1rem"},body:{padding:"0.5rem 1rem",height:"100%"}},children:e.jsx(l,{vertical:!0,gap:16,className:"tasks-completed-wrapper",children:e.jsx(le,{spinning:d,size:"large",children:c.map((p,g)=>o.createElement(js,{...p,key:g}))})})})]})},ws=({stats:t,onClick:s,active:a=!1,id:n,title:r})=>{const i=V[n].icon||null;return e.jsxs(l,{className:M({"task-type-container":!0,"task-type-container--active":a}),vertical:!0,justify:"space-between",onClick:c=>{c.stopPropagation(),s==null||s(n)},children:[e.jsx(A.Title,{level:3,children:r}),e.jsxs(l,{justify:"space-between",align:"center",children:[e.jsxs(l,{vertical:!0,style:{fontSize:"14px",lineHeight:1.2},children:[e.jsxs("span",{style:{textDecoration:"underline"},children:["Сделано: ",t.done]}),e.jsxs("span",{children:["В работе: ",t.inWork]})]}),i&&e.jsx(i,{style:{fontSize:32}})]})]})},{Content:Is,Sider:bs}=Te,Ts=()=>{const[t,s]=o.useState(null),a=W(),{taskGroups:n,userTasksIsLoading:r,userId:i}=fs(),c=d=>{s(t===d?null:d)};return e.jsxs(Te,{className:"tasks-page-layout",children:[e.jsx(Is,{className:"task-page-content",onClick:()=>{s(null)},children:e.jsx(le,{spinning:r,children:e.jsx(l,{className:"task-page-container",children:n&&Object.keys(n).map(d=>e.jsx(ws,{active:t===d,title:n[d].label,id:d,onClick:c,stats:n[d].stats},d))})})}),e.jsx(bs,{className:M("tasks-page-sider ",!t&&"tasks-page-sider--collapsed"),trigger:null,collapsed:!t,collapsible:!0,defaultCollapsed:!0,collapsedWidth:0,width:"60%",children:e.jsx(vs,{tasks:t?n[t].data:[],active:!!t,type:t,closeForm:()=>a(T.BASE),userId:i},t)})]})},Ss=t=>o.createElement("svg",{width:"143.49536mm",height:"122.80552mm",viewBox:"0 0 143.49536 122.80552",id:"svg5",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg","xmlns:svg":"http://www.w3.org/2000/svg",...t},o.createElement("defs",{id:"defs2"}),o.createElement("g",{id:"layer1",transform:"translate(-45.930734,-34.912509)"},o.createElement("g",{id:"g2544",transform:"translate(-0.87950327)"},o.createElement("text",{xmlSpace:"preserve",style:{fontSize:"61.9697px",lineHeight:.4,fontFamily:"Bahnschrift",InkscapeFontSpecification:"Bahnschrift",fill:"#4c47f7",stroke:"#000000",strokeWidth:0,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"none",strokeDashoffset:1.05827,paintOrder:"fill markers stroke"},x:62.63818,y:118.4164,id:"text236"},o.createElement("tspan",{id:"tspan234",style:{fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontStretch:"normal",fontFamily:"'Lucida Console'",InkscapeFontSpecification:"'Lucida Console'",fill:"#000000",fillOpacity:1,strokeWidth:0,strokeDasharray:"none"},x:62.63818,y:118.4164},o.createElement("tspan",{style:{fill:"#8c8c8c",fillOpacity:1},id:"tspan3600"},"4"),"0")),o.createElement("text",{xmlSpace:"preserve",style:{fontSize:"61.9697px",lineHeight:.4,fontFamily:"Bahnschrift",InkscapeFontSpecification:"Bahnschrift",fill:"#4c47f7",stroke:"#000000",strokeWidth:0,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"none",strokeDashoffset:1.05827,paintOrder:"fill markers stroke"},x:-174.00565,y:118.4164,id:"text236-6",transform:"scale(-1,1)"},o.createElement("tspan",{id:"tspan234-5",style:{fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontStretch:"normal",fontFamily:"'Lucida Console'",InkscapeFontSpecification:"'Lucida Console'",fill:"#8c8c8c",fillOpacity:1,strokeWidth:0,strokeDasharray:"none"},x:-174.00565,y:118.4164},"4"))),o.createElement("text",{xmlSpace:"preserve",style:{fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontStretch:"normal",fontSize:"9.87778px",lineHeight:.4,fontFamily:"'Lucida Console'",InkscapeFontSpecification:"'Lucida Console'",letterSpacing:0,wordSpacing:0,fill:"#000000",fillOpacity:1,stroke:"none",strokeWidth:.4,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"none",strokeDashoffset:1.05827,paintOrder:"fill markers stroke"},id:"text2152",transform:"rotate(-1.438715,-401.31432,179.37148)"},o.createElement("textPath",{xlinkHref:"#path2399",id:"textPath2502",style:{fontSize:"9.87778px"}},o.createElement("tspan",{id:"tspan2150",style:{fontSize:"9.87778px",strokeWidth:.4},dx:0,dy:0,rotate:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0"},"страница не найдена"))),o.createElement("path",{style:{fill:"none",fillOpacity:1,stroke:"#000000",strokeWidth:0,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"none",strokeDashoffset:1.05827,strokeOpacity:1,paintOrder:"fill markers stroke"},d:"m 65.040689,139.41204 c 38.596841,20.35488 72.893801,19.78702 104.803441,0 v 0.17068",id:"path2399"}),o.createElement("ellipse",{style:{fill:"none",fillOpacity:1,stroke:"#8c8c8c",strokeWidth:.924746,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"none",strokeDashoffset:1.05827,strokeOpacity:1,paintOrder:"fill markers stroke"},id:"path2548",cx:117.67841,cy:96.315277,rx:71.285309,ry:60.940395}))),Cs=()=>{const t=W();return e.jsxs(l,{align:"center",justify:"center",style:{position:"relative",width:"100%",height:"100%"},children:[e.jsx(x,{type:"text",icon:e.jsx(oe,{}),style:{position:"absolute",left:"0.2rem",top:"0.2rem"},title:"На главную",onClick:()=>{t(T.BASE)}}),e.jsx(Ss,{})]})},Ps=()=>e.jsx(l,{className:"auth-layout-container",vertical:!0,gap:"middle",align:"center",justify:"center",children:e.jsxs(l,{className:"auth-layout-content",vertical:!0,align:"center",justify:"center",children:[e.jsx("h1",{children:"7S"}),e.jsx(xe,{})]})}),Rs=({data:t})=>{const s=({payload:{value:a},textAnchor:n,x:r,y:i})=>(console.log(n),e.jsx("g",{transform:`translate(${r},${i})`,textAnchor:n,children:e.jsx("text",{x:0,y:0,dy:4,textAnchor:n,fontSize:24,fill:"var(--gray-9)",children:V[a].title})}));return e.jsx(kt,{width:"100%",height:"100%",children:e.jsxs(vt,{cx:"50%",cy:"50%",outerRadius:"80%",data:t,children:[e.jsx(wt,{}),e.jsx(It,{dataKey:"type",tick:s}),e.jsx(bt,{stroke:"var(--gray-7)",angle:65}),e.jsx(Tt,{name:"Mike",dataKey:"value",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6})]})})},Fs=t=>{const{data:s=[],isLoading:a}=B({...N.getTaskTypes(),refetchOnWindowFocus:!1,refetchOnMount:!1}),{data:n=[],isLoading:r}=B({...N.getUserCompletedTasks(t),refetchIntervalInBackground:!0,refetchInterval:5*Fe,refetchOnWindowFocus:!1,enabled:!!t}),i=o.useMemo(()=>{const d={};return s.length&&s.forEach(m=>{d[m.id]||(d[m.id]=0)}),n.forEach(m=>{++d[m.type_id]}),d},[n,s]),c=Math.max(...Object.values(i))||7;return{taskTypes:s,userTasks:n,taskTypesIsLoading:a,userTasksIsLoading:r,taskGroupStats:i,maxPower:c}},{Title:Es}=A,$e=()=>{const t=W(),a=Me().reduce((n,r,i)=>{var c,d;return(c=r.handle)!=null&&c.title&&n.push(e.jsx(Es,{level:4,children:(d=r.handle)==null?void 0:d.title},i)),n},[]);return e.jsxs(l,{gap:8,align:"center",style:{borderBottom:"1px solid var(--gray-5)",paddingBottom:"0.2rem",minHeight:"fit-content"},children:[e.jsx(x,{type:"text",icon:e.jsx(oe,{}),onClick:()=>{t(T.BASE)}}),a]})},$s=()=>{const{user:t}=D(),{taskGroupStats:s,maxPower:a}=Fs(t.id),n=Object.keys(s).length?Object.entries(s).map(([r,i])=>({type:r,value:i,fullMark:a})):[];return e.jsxs(l,{vertical:!0,flex:1,style:{height:"100%",width:"100%",padding:"0.2rem"},children:[e.jsx($e,{}),e.jsx(Rs,{data:n})]})},Ls=()=>{const t=W(),s=F({mutationFn:a=>ee.updatePassword(a),onSuccess:()=>{L.info("Пароль успешно обновлен"),t(T.SIGN_IN)},onError:a=>{L.error(a.message||"Произошла ошибка при обновлении пароля. Попробуйте позже или обратитесь к администратору")}});return e.jsxs(h,{name:"sign-in",layout:"vertical",style:{width:"100%"},onFinish:({password:a})=>s.mutate(a),children:[e.jsx(h.Item,{name:"password",label:"Новый пароль",rules:[{required:!0,message:C.REQUIRED}],children:e.jsx(I.Password,{size:"large",type:"password"})}),e.jsx(h.Item,{name:"passwordRepeat",dependencies:["password"],label:"Повторите пароль",rules:[{required:!0,message:C.REQUIRED},({getFieldValue:a})=>({validator(n,r){return!r||a("password")===r?Promise.resolve():Promise.reject(new Error(C.PASSWORD_DUPLICATE))}})],children:e.jsx(I.Password,{size:"large",type:"password"})}),e.jsx(h.Item,{style:{textAlign:"center"},children:e.jsx(x,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:s.isPending,children:"Обновить пароль"})})]})},Os=()=>e.jsxs("p",{children:["Привет! ",e.jsx("br",{}),"Данное приложение создано, как плод работы моих мыслей по поводу нашего бренного прибывания! ",e.jsx("br",{}),"- Кто я? Чего делаю и зачем ? В чем смысл?",e.jsx("br",{}),"- Насколько я близок с Богом?",e.jsx("br",{}),"- Что нужно делать? Как правильно двигаться? ",e.jsx("br",{}),"- Что я хочу и куда стремлюсь? ",e.jsx("br",{}),"- Что я делаю для развития? Доволен ли я результатом своих действий ?",e.jsx("br",{}),"- Что является движущий силой для меня?",e.jsx("br",{}),e.jsx("br",{}),"Если мысли эти Тебе чужды то возможно это приложение, которое создано впервую очередь как помошник мне в собственной жизни - не подойдет Тебе, в этом нет ничего страшного - значит у Тебя свой путь - ищи его ! и Удачи Тебе! Если в чем-то вопросы совпадают или Ты понимаешь ход моих мыслей, то читай далее... Аксимома - Принял тот факт, что ответом на все вопросы у меня нет, сей час точно, а может и не будет никогда...",e.jsx("br",{}),"Факт 1 - жизнь идет несмотря на то , нашел ли я ответы или нет и с этим надо что-то делать",e.jsx("br",{}),"Факт 2 - мне почему-то ничего не хочется, может потому что очень долго был зависимым или в базовой комплектации со мной что-то не так - суть имеем что имеем",e.jsx("br",{}),"Вывод - выделить оснонвые группы дел (как мне кажется) в течении жизни, которые спосоствуют гармоничному развитию личности (опять же по-моему мнению) чтобы двигаться по ним пока идет поиск ответов на вопросы, что ранее перечислил...",e.jsx("br",{}),"Итог: Созданы 7+1 направление (+1 потому то одну категорию - из опыта, надо включить позже, когда освоишься с системой и она войдет в Твою жизнь) которые надо сделать привычками(привычками потому что Факт2 - ничего не хочется=) ), это разовьет дисциплину, в дисциплина это всего хорошо. это всегда Сила Воли",e.jsx("br",{}),"Категории, что я выделил: Здоровье, Духовное-нравственное развитие, Взаимодействие с социумом, Развитие интеллеката, Бытовые дела, Развитие проффесиональное, Отдых (порядок - просто перечисление, не содержит приоретиацию)"]}),qs=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Ежедневная забота о теле – основа всего."}),e.jsx("p",{children:"Утренняя зарядка, прогулка, питьевой режим, здоровый сон и питание дают энергию, укрепляют иммунитет и повышают стрессоустойчивость, позволяя эффективно справляться с любыми задачами."}),e.jsx("p",{children:"Например для меня, это стакан воды в день, утренняя зарядка с обливаниями, три раза в неделю упражнения\\бег, упражнения для глаз."})]}),As=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Социальные коммуникации."}),e.jsx("h3",{children:"Общение – фундамент эмоционального благополучия."}),e.jsx("p",{children:"Короткий разговор с близким, обед с коллегой или вежливый диалог с соседом поддерживают связи, дарят чувство принадлежности, помогают решать вопросы и снимают напряжение, делая жизнь насыщеннее.."}),e.jsx("p",{children:"Например для меня, это провести время с Семьей или позвонить Отцу, Брату, навестить Маму на работе, позвонить с другом."})]}),Ns=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:" Духовно-нравственная воспитание"}),e.jsxs("p",{children:["Сюда я вынес все то с чем мы сталиваемся в поисках ответов на след вопросы:",e.jsx("br",{}),"Кто я? Есть ли Бог? Быть или не быть? Что для меня важно и во что я верю и т.д.",e.jsx("br",{}),"Слово это все то, что помогает Вам познать себя, мир вокруг Вас от бесконечно малого во внутрь, до бесконечно большого во вне"]}),e.jsx("p",{children:"Работа над этим необходимо, как мне кажется, чтобы обрести некий фундамент осознанности в поступках и убеждений"}),e.jsxs("p",{children:["Не буду углублять в какую-то философию или религизность - это Ваше личное дело, Ваш личный путь...",e.jsx("br",{}),"Как пример: лично для меня сюда вошли утренние и вечерние молитвы, работа по 12 шаговой программе, дыхательные упражнения"]})]}),Us=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Домашние дела."}),e.jsx("h3",{children:"Порядок вокруг создает порядок внутри."}),e.jsx("p",{children:"Быстрая уборка, мытье посуды, приготовление еды или раскладывание вещей по местам поддерживают комфортную среду, экономят время в будущем, снижают хаос и стресс, освобождая голову для важного."}),e.jsx("p",{children:"Например для меня, это все домашние дела которые могут возникнуть от поменять лампочки и наточить ножи до сделать навес над верандой, распечтать документы, оплатить домен, словом обычные бытовые дела которые должны быть сделаны."})]}),_s=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Личностное-Профессиональное развитие"}),e.jsx("h3",{children:"Постоянное движение вперед – залог роста"}),e.jsx("p",{children:"Чтение профессиональной статьи, изучение нового навыка, планирование карьеры или работа над личными качествами (например, тайм-менеджмент) повышают компетентность, уверенность, открывают новые возможности и предотвращают застой."}),e.jsx("p",{children:"Например для меня, это чтение статьи по профессиональной сфере, создание этого и других приложений, подготовка докладов"})]}),Ds=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Интеллектуальные упражнения"}),e.jsx("h3",{children:"Тренировка для ума сохраняет его остроту"}),e.jsx("p",{children:"Разгадывание кроссворда, изучение иностранных слов, анализ прочитанного, решение логических задач или игра в шахматы стимулируют мозг, улучшают память, концентрацию и гибкость мышления, помогая находить нестандартные решения."}),e.jsx("p",{children:"Например для меня, это разгадывание судоку, филвордов, игры в го, решение задач на алгоритмы"})]}),Ms=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Время для себя"}),e.jsx("h3",{children:"Перезагрузка необходима для продуктивности."}),e.jsx("p",{children:". Сознательное безделье, любимое хобби, медитация, теплая ванна или просто тишина позволяют телу и психике восстановиться, предотвращают выгорание, восполняют ресурсы и дарят радость, делая остальное время более качественным."}),e.jsx("p",{children:"Например для меня, это просмотр мультиков, сериалов порой рисование - тут если честно мне трудно но в пути"})]}),Bs=()=>{const[t,s]=o.useState(null),a=r=>()=>{s(i=>i&&i.id===r.id?null:r)},n=t!=null&&t.info?zs[t.id]:Os;return e.jsxs(l,{vertical:!0,className:"info-page-wrapper",children:[e.jsx($e,{}),e.jsxs(l,{className:"info-page-content-container",children:[e.jsx(l,{gap:8,className:"info-page-buttons",vertical:!0,children:ks.map(r=>{const i=r.icon;return i?e.jsx(x,{type:"text",className:(t==null?void 0:t.id)===r.id?"info-page-button-active":"",icon:e.jsx(i,{}),title:r.title,onClick:a(r)},r.id):null})}),e.jsx(l,{className:"info-page-content-wrapper",justify:"center",children:e.jsxs(l,{className:"info-page-content",vertical:!0,gap:8,children:[e.jsx(A.Title,{level:1,children:(t==null?void 0:t.title)||"Зачем приложение нужно"}),n&&e.jsx(n,{})]})})]})]})},zs={[P.soul]:Ns,[P.growth]:_s,[P.health]:qs,[P.life]:Us,[P.mind]:Ds,[P.rest]:Ms,[P.social]:As},Ws=[{Component:Ps,children:[{index:!0,Component:ge},{path:T.SIGN_IN,Component:ge},{path:T.SIGN_UP,Component:Yt},{path:T.RESET_PASSWORD,Component:Ht},{path:T.UPDATE_PASSWORD,Component:Ls},{path:"*",loader:()=>Be("/")}]}],Gs=[{Component:os,children:[{index:!0,Component:Ts},{path:T.STATISTIC,Component:$s,handle:{title:"Статистика"}},{path:T.INFO,Component:Bs,handle:{title:"О Приложении"}},{path:"*",Component:Cs}]}],Qs=()=>{const{isAuthCheking:t,user:s,isUserLoading:a}=D();if(t||a)return e.jsx(le,{fullscreen:!0});const n=ze(s!=null&&s.id?Gs:Ws);return e.jsx(We,{router:n})};let Y=document.getElementById("root");Y||(Y=document.createElement("div"),Y.id="root",document.body.appendChild(Y));Se(Y).render(e.jsx(o.StrictMode,{children:e.jsxs(Ne,{client:At,children:[e.jsx(jt,{theme:Nt,locale:Pt,children:e.jsx(qt,{children:e.jsx(Qs,{})})}),e.jsx(Ue,{initialIsOpen:!1})]})}));
