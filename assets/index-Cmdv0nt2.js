const __vite__fileDeps=["assets/signIn-D5sgSi_y.js","assets/react-Da5Vs9nI.js","assets/vendor-CRy8jGia.js","assets/ant-IY2u0qDF.js","assets/supabase-D-CCXIL6.js","assets/@react-router-DXQsnSo3.js","assets/auth-DtaX0GhB.js","assets/recharts-Ck2C22rv.js","assets/signUp-Bc9ZRX2F.js","assets/resetPassword-BTM_irIh.js","assets/updatePassword-DkKMBV4w.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{q as J,r as h,u as $,j as e,k as V,l as P,a as K,S as ke,m as be,Q as Ie,n as we}from"./react-Da5Vs9nI.js";import{w as E,x as L,Q as O,F as v,L as Ce,B as m,y as c,R as Te,z as R,H as oe,I as N,J as ae,K as ne,M as w,N as Se,O as Re,P as Ee,U as Fe,X as G,Y as ce,Z as le,_ as F,$ as X,a0 as Z,a1 as _e,a2 as de,a3 as Pe,a4 as ue,a5 as Le,a6 as T,a7 as Oe,a8 as Ae,a9 as Ne,aa as _,ab as pe,ac as he,ad as Ue,ae as Me,af as $e,ag as Be,ah as qe,ai as De,aj as ze,ak as Ge,al as ee,am as Ve,an as Qe,ao as Ye,ap as te,aq as me,ar as xe,as as U,at as Ke,au as We,av as He}from"./ant-IY2u0qDF.js";import{bI as Je,au as Xe,bJ as Ze,G as M}from"./vendor-CRy8jGia.js";import{u as Q,O as ge,a as et,r as tt,c as st,R as at}from"./@react-router-DXQsnSo3.js";import{_ as D}from"./supabase-D-CCXIL6.js";import{R as nt,a as rt,P as it,b as ot,c as ct,d as lt}from"./recharts-Ck2C22rv.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();const dt=t=>J({queryKey:[O.checkLogin,t],queryFn:async({queryKey:s,signal:r})=>{console.log("signal",r);const{data:a,error:n}=await E.from("users").select().eq("login",s[1]).abortSignal(r);if(n)throw new L({message:n.message,name:"Не удалось проверить логин"});return!!a.length}}),ut=async t=>{const{data:s,error:r}=await E.from("users").update(t).eq("id",t.id).select();if(r)throw new L({message:r.message,name:"Не удалось обновить данные пользователя"});if(s)return s[0]},pt=t=>J({queryKey:[O.user,t],queryFn:async({queryKey:s,signal:r})=>{const{data:a,error:n}=await E.from("users").select().eq("id",s[1]).abortSignal(r);if(n)throw new L({message:n.message,name:"Не удалось получить данные пользователя"});return a[0]},enabled:!!t}),W={checkLogin:dt,updateUserInfo:ut,getUserById:pt},ht=t=>J({queryKey:[O.attachments,t],queryFn:async({signal:s,queryKey:r})=>{const{data:a,error:n}=await E.from("attachments").select().eq("id",r[1]).abortSignal(s);if(n)throw new L({name:"Не удалось получить вложения",message:`${n.code}: ${n.message}`});return a[0]},select:s=>({fullPath:s.full_path,id:s.id,path:s.path,publicUrl:s.public_url}),enabled:!!t}),mt=async(t,s)=>{const{error:r}=await E.from("attachments").delete().eq("id",t.id);if(r)throw new L({name:"Не удалось удалить вложения",message:`${r.code}: ${r.message}`});const{error:a}=await E.storage.from(s).remove([t.path]);if(a)throw new L({name:"Не удалось удалить файл из хранилища",message:`${a.name}: ${a.message}`})},xt=async(t,s)=>{const{data:r,error:a}=await E.storage.from(s).upload(t.name,t);if(a)throw new L({name:"Не удалось сохранить вложения",message:`${a.name}: ${a.message}`});const{data:{publicUrl:n}}=E.storage.from(s).getPublicUrl(r.path);console.log("uploadedFile",r);const{error:i}=await E.from("attachments").insert([{id:r.id,path:r.path,full_path:r.fullPath,public_url:n||null}]).select();if(i)throw new L({name:"Не удалось получить вложения",message:`${i.code}: ${i.message}`});return{...r,publicUrl:n}},H={getAttachmentById:ht,deleteAttachment:mt,saveAttachment:xt},re="sb-bezykkplqcrsoettxmqn-auth-token",je=h.createContext({user:null,isAuthCheking:!0,isUserLoading:!1,setUserId:()=>{},logOut:()=>{}}),gt=({children:t})=>{const[s,r]=h.useState(null),[a,n]=h.useState(!0),{data:i=null,isFetching:l}=$({...W.getUserById(s)}),{data:d=null}=$({...H.getAttachmentById(i==null?void 0:i.avatar_id)}),u=()=>{localStorage.removeItem(re),r(null)};h.useEffect(()=>{const f=localStorage.getItem(re);if(!f){n(!1);return}const{user:k}=JSON.parse(f);k.id&&(r(k.id),n(!1))},[]),h.useEffect(()=>{i&&!a&&n(!1)},[i,a]);const p=h.useMemo(()=>i?{...i,avatar:d||null}:null,[i,d]);return e.jsx(je.Provider,{value:{user:p,isAuthCheking:a,setUserId:r,isUserLoading:l,logOut:u},children:t})},jt=new Je,ft={cssVar:!0,token:{fontSize:16,colorBgLayout:"none",colorLink:"#7CB2B0",colorBorder:"#D2D7E3",colorTextPlaceholder:"var(--gray-5)"},components:{Layout:{siderBg:"#CDE1E1"},Input:{colorBgBase:"none",colorBgContainer:"none",fontSize:16,borderRadius:0},Typography:{titleMarginBottom:"none",titleMarginTop:"none"},Upload:{colorInfoText:"var(--gray-5)"}}},A=()=>h.useContext(je),yt=(t,s)=>{const r=new FileReader;r.addEventListener("load",()=>s(r.result)),r.readAsDataURL(t)},fe=t=>{const s=t.type==="image/jpeg"||t.type==="image/png";if(!s)return"Загрузить можно только файлы в формате: jpeg, png";const r=t.size/1024/1024<2;return r?s&&r:"Файл должен быть меньше 2MB"},ye=(t,s)=>{if(t===s)return!0;if(typeof t!="object"&&typeof t!="function"||typeof s!="object"&&typeof s!="function")return!1;if(t===null||s===null)return t===s;const r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(let n of r)if(!a.includes(n)||!ye(t[n],s[n]))return!1;return!0},vt=()=>{const{user:t}=A(),s=V(),[r,a]=h.useState(!1),[n,i]=h.useState(null),[l,d]=h.useState(!1),[u]=v.useForm(),p=h.useRef(kt),f=P({mutationFn:j=>W.updateUserInfo({...j,id:t.id}),onSuccess:(j,I)=>{s.setQueryData([O.user,t==null?void 0:t.id],{...t,...I})}}),k=P({mutationFn:async j=>H.deleteAttachment(j,"avatar")}),g=P({mutationFn:async j=>H.saveAttachment(j,"avatar")});h.useEffect(()=>{var j;p.current={login:(t==null?void 0:t.login)||"",birthday:Xe(t==null?void 0:t.birthdate),surname:(t==null?void 0:t.surname)||"",name:(t==null?void 0:t.name)||"",patronymic:(t==null?void 0:t.patronymic)||"",avatar:(t==null?void 0:t.avatar)||null},(j=t==null?void 0:t.avatar)!=null&&j.publicUrl&&i(t.avatar.publicUrl),u.setFieldsValue(p.current)},[t,u]);const y=async(j,I)=>{if(I===(t==null?void 0:t.login))return Promise.resolve();try{return await s.fetchQuery(W.checkLogin(I))?Promise.reject(Ce):Promise.resolve()}catch{return Promise.reject("При проверке логина произошла ошибка")}},S=j=>{d(!ye(j,p.current))},o=({file:j})=>{j&&(a(!0),u.setFieldValue("avatar",j),yt(j,I=>{a(!1),i(I)}))},x=()=>{u.setFieldValue("avatar",""),i(null),d(!0)},b=u.getFieldsError().filter(({errors:j})=>j.length).length>0,B=async()=>{const j=t==null?void 0:t.avatar,I=u.getFieldValue("avatar");return j&&(I instanceof File||!I)&&await k.mutateAsync(j),I instanceof File?await g.mutateAsync(I):null};return{isAvatarLoading:r,checkDirty:S,avatarUrl:n,isFormDirty:l,form:u,updateUser:async j=>{const{avatar:I,...Y}=j;let q;return I!==(t==null?void 0:t.avatar)?q=await B():q=(t==null?void 0:t.avatar)||null,f.mutate({...Y,avatar_id:(q==null?void 0:q.id)||null})},handleChangeAvatar:o,deleteAvatar:x,checkLogin:y,updateAvatar:B,hasErrors:b,isFormSubmitting:f.isPending||g.isPending||k.isPending}},kt={login:"",birthday:null,surname:"",name:"",patronymic:"",avatar:null},{confirm:bt}=X,It=({onCancel:t})=>{const{form:s,updateUser:r,checkDirty:a,isAvatarLoading:n,avatarUrl:i,isFormDirty:l,handleChangeAvatar:d,deleteAvatar:u,checkLogin:p,isFormSubmitting:f}=vt(),k=o=>{r(o).then(()=>{F.success("Данные успешно сохранены"),t()}).catch(()=>{F.error("Ошибка при сохранении данных")})},g=e.jsx(m,{style:{border:0,background:"none"},type:"text",children:e.jsx(c,{vertical:!0,align:"center",justify:"center",children:n?e.jsx(Te,{}):e.jsxs(R.Paragraph,{type:"secondary",style:{marginTop:8},children:[e.jsx(oe,{style:{color:"var(--gray-7)"}})," Загрузить"]})})}),y=()=>{l?bt({title:"Закрыть окно ?",content:"Несохраненные изменения будут утеряны.",okText:"Да",cancelText:"Нет",onOk:t}):t()},S=o=>{const x=fe(o),b=typeof x!="string";return b||F.error(x),b};return e.jsxs(v,{onFinish:k,labelAlign:"left",layout:"vertical",labelWrap:!0,disabled:f,form:s,onValuesChange:(o,x)=>a(x),size:"large",style:{position:"relative",maxWidth:"600px"},children:[e.jsxs(c,{align:"center",children:[e.jsxs(c,{vertical:!0,flex:1,children:[e.jsx(v.Item,{label:"Логин",name:"login",wrapperCol:{span:22},validateTrigger:["onBlur","onChange"],validateFirst:!0,rules:[{required:!0,message:N.REQUIRED},{min:ae,message:N.MIN_LENGTH(ae)},{max:ne,message:N.MAX_LENGTH(ne)},{validateTrigger:["onBlur"],validator:p}],children:e.jsx(w,{placeholder:"LUKA"})}),e.jsx(v.Item,{label:"Дата рождения",name:"birthday",wrapperCol:{span:22},rules:[{required:!0,message:N.REQUIRED,type:"date"}],children:e.jsx(Se,{style:{width:"100%"},placeholder:"06.06.0006",format:Re,maxDate:Ee,minDate:Fe})})]}),e.jsxs(v.Item,{name:"avatar",valuePropName:"fileList[0]",style:{position:"relative"},children:[e.jsx(G,{className:"person-form-upload",name:"avatar",listType:"picture-card",showUploadList:!1,beforeUpload:S,customRequest:d,disabled:!!i,children:i?e.jsx("div",{style:{margin:"4px",borderRadius:"4px",overflow:"hidden"},children:e.jsx(ce,{height:140,style:{objectFit:"cover"},src:i,preview:{toolbarRender:()=>null}})}):g}),i&&e.jsx(m,{style:{position:"absolute",bottom:-32,right:0},type:"text",size:"small",onClick:u,icon:e.jsx(le,{})})]})]}),e.jsx(v.Item,{label:"Фамилия",name:"surname",rules:[{pattern:/^[\s\u0400-\u04FF]+$/,message:N.CYRILLIC}],children:e.jsx(w,{placeholder:"Лукавый"})}),e.jsx(v.Item,{label:"Имя",name:"name",rules:[{pattern:/^[\s\u0400-\u04FF]+$/,message:N.CYRILLIC}],children:e.jsx(w,{placeholder:"Лука"})}),e.jsx(v.Item,{label:"Отчество",name:"patronymic",rules:[{pattern:/^[\s\u0400-\u04FF]+$/,message:N.CYRILLIC}],children:e.jsx(w,{placeholder:"Лукич"})}),e.jsxs(c,{gap:16,justify:"end",children:[e.jsx(m,{type:"primary",htmlType:"submit",disabled:!l,children:"Сохранить"}),e.jsx(m,{type:"default",onClick:y,children:"Отмена"})]})]})};function wt({hideContainer:t}){var i;const[s,r]=h.useState(!1),{user:a}=A(),n=()=>{t(),r(!0)};return e.jsxs(Z.Ribbon,{text:e.jsx(R,{children:"Новичок"}),children:[e.jsxs(c,{vertical:!0,gap:16,className:"acc-container",children:[e.jsxs(c,{gap:16,children:[e.jsx(_e,{shape:"square",size:64,gap:8,src:(i=a==null?void 0:a.avatar)==null?void 0:i.publicUrl,icon:e.jsx(de,{})}),e.jsxs(c,{vertical:!0,gap:16,children:[e.jsx(R,{children:a==null?void 0:a.login}),e.jsx(R,{children:a==null?void 0:a.email}),e.jsx(R,{children:[a==null?void 0:a.surname,a==null?void 0:a.name].filter(Boolean).join(" ")})]})]}),e.jsx(m,{className:"acc-edit-button",icon:e.jsx(Pe,{}),size:"large",type:"text",onClick:n})]}),e.jsx(X,{open:s,closable:!1,footer:null,centered:!0,destroyOnClose:!0,title:"Реадктирование данных профиля",children:e.jsx(It,{onCancel:()=>{r(!1)}})})]})}const Ct={name:"",email:"",messubject:"",description:""},Tt=({close:t,isOpen:s})=>{const[r]=v.useForm(),[a,n]=K.useState([]),[i,l]=K.useState(""),[d,u]=K.useState(!1),p=P({mutationFn:St,onSuccess:()=>{F.success("Обращение успешно отправлено"),r.resetFields(),n([]),t()},onError:()=>{F.error("Не удалось отправить обращение")}}),f=o=>{const x=fe(o);return console.log("result",x),typeof x=="string"?(F.error(x+":"+o.name),G.LIST_IGNORE):!0},k=({file:o})=>{console.log("handleUploadChange",a),n([...a,o])},g=async o=>{console.log("handlePreview",o),!o.url&&!o.preview&&o.originFileObj&&(o.preview=URL.createObjectURL(o.originFileObj)),l(o.url||o.preview||URL.createObjectURL(o)),u(!0)},y=o=>{const x={...o,attachments:a.map(b=>b.originFileObj).filter(Boolean)};p.mutate(x)},S=()=>{l(""),n([]),t()};return e.jsx(X,{title:"Форма обратной связи",open:s,onCancel:S,destroyOnClose:!0,footer:null,className:"feed-back-modal",children:e.jsxs(v,{name:"feedback_form",layout:"vertical",onFinish:y,form:r,initialValues:Ct,size:"large",children:[e.jsxs(c,{justify:"space-between",gap:16,children:[e.jsxs(c,{vertical:!0,flex:1,children:[e.jsx(v.Item,{label:"Имя",name:"name",rules:[{required:!0}],children:e.jsx(w,{})}),e.jsx(v.Item,{label:"Email",name:"email",validateTrigger:["onBlur"],rules:[{required:!0,message:""},{required:!0,type:"email",message:"Введен некоретный email"}],children:e.jsx(w,{})}),e.jsx(v.Item,{label:"Тема",name:"subject",rules:[{required:!0,message:"Введите тему"},{min:6,message:"Тема должна быть не менее 6 символов"}],children:e.jsx(w,{})})]}),e.jsx(c,{flex:1,children:e.jsx(v.Item,{style:{width:"100%"},label:"Описание",name:"description",rules:[{required:!0,message:"Введите описание"},{min:10,message:"Описание должно быть не менее 10 символов"}],children:e.jsx("div",{style:{position:"relative"},children:e.jsx(w.TextArea,{rows:7,style:{resize:"none",paddingBottom:40}})})})})]}),a.length>0&&e.jsx(G,{fileList:a,className:"feedback-attachments",onRemove:o=>{const x=a.indexOf(o),b=a.slice();b.splice(x,1),n(b)},onPreview:g,listType:"text"}),i&&e.jsx(ce,{style:{display:"none",height:0},src:i,preview:{visible:d,onVisibleChange:o=>u(o),destroyOnClose:!0,toolbarRender:()=>null}}),e.jsxs(c,{children:[e.jsx(G,{beforeUpload:f,fileList:a,multiple:!0,maxCount:5,accept:".jpeg,.jpg,.png",showUploadList:!1,customRequest:k,children:e.jsx(m,{icon:e.jsx(oe,{}),type:"text"})}),e.jsxs(c,{style:{marginLeft:"auto"},gap:8,children:[e.jsx(m,{onClick:S,children:"Отмена"}),e.jsx(m,{type:"primary",htmlType:"submit",loading:p.isPending,children:"Отправить"})]})]})]})})},St=async t=>(console.log("sendFeedback",t),await new Promise(s=>setTimeout(s,1e3)),Math.random()>.3?Promise.resolve():Promise.reject(new Error("Ошибка сервера"))),Rt=()=>{const{logOut:t}=A(),[s,r]=h.useState(!1),[a,n]=h.useState(!1),i=Q();return e.jsxs(c,{vertical:!0,justify:"space-between",className:"menu-wrapper",children:[e.jsxs("div",{className:"user-button-wrapper",children:[e.jsx(m,{type:"text",icon:e.jsx(de,{size:24}),onClick:()=>r(!0)}),e.jsx(ue,{placement:"bottomLeft",content:e.jsx(wt,{hideContainer:()=>r(!1)}),overlayInnerStyle:{padding:0},arrow:!1,open:s,trigger:"click",onOpenChange:l=>r(l),children:e.jsx("div",{className:"menu-point-popover"})})]}),e.jsxs(c,{vertical:!0,justify:"space-between",style:{height:"100%",marginTop:"0.4rem"},children:[e.jsxs(c,{vertical:!0,gap:"0.5rem",children:[e.jsx(m,{type:"text",icon:e.jsx(Le,{size:24}),title:"Статистика",onClick:()=>{i(T.STATISTIC)}}),e.jsx(m,{icon:e.jsx(Oe,{size:24}),onClick:()=>i(T.INFO),type:"text",title:"О приложении"})]}),e.jsxs(c,{vertical:!0,children:[e.jsx(m,{icon:e.jsx(Ae,{size:24}),onClick:()=>n(!0),type:"text"}),e.jsx(m,{type:"text",icon:e.jsx(Ne,{size:24}),title:"Выход",onClick:t})]})]}),e.jsx(Tt,{close:()=>n(!1),isOpen:a})]})},Et=()=>e.jsxs(c,{gap:"0",align:"center",justify:"space-between",style:{width:"100%",height:"100%"},children:[e.jsx(Rt,{}),e.jsx(ge,{})]});var C=(t=>(t.active="active",t.completed="completed",t.new="new",t))(C||{});const Ft=()=>{const{user:t}=A(),[s,r]=h.useState(),a=h.useMemo(()=>(t==null?void 0:t.id)||"",[t==null?void 0:t.id]),{data:n,isLoading:i}=$({..._.getTaskTypes(),refetchOnWindowFocus:!1,refetchOnMount:!1}),{data:l=[],isLoading:d}=$({..._.getUserTasks(a),refetchIntervalInBackground:!0,refetchInterval:5*pe,refetchOnWindowFocus:!1,enabled:!!a});return h.useEffect(()=>{if(!(n!=null&&n.length))return;const u={};n.forEach(p=>{u[p.id]||(u[p.id]={data:[],stats:{all:0,inWork:0},label:p.title})}),l.forEach(p=>{u[p.type_id].data.push(p),u[p.type_id].stats.all+=1,p.status_id===C.active&&(u[p.type_id].stats.inWork+=1)}),r(u)},[l,n]),{taskTypesIsLoading:i,taskTypes:n,userTasks:l,userTasksIsLoading:d,taskGroups:s,userId:a}},_t=(t,s)=>{const[r,a]=h.useState(t.text),n=Ze(r,300);return h.useEffect(()=>{n!==t.text&&s({...t,text:n})},[n,s,t]),{value:r,setValue:a}},Pt=({task:t})=>{const{done:s,priority:r=0}=t,a=V(),{user:n}=A(),i=P({mutationFn:_.deleteTask,onSuccess:o=>{a.setQueryData([O.tasks,n.id],x=>x==null?void 0:x.filter(b=>b.id!==o))}}),l=P({mutationFn:_.updateTask,onSuccess:o=>{a.setQueryData([O.tasks,n.id],x=>{const b=[...x??[]],B=b.findIndex(se=>se.id===o.id);return B!==-1&&(b[B]={...b[B],...o}),[...b]})}}),d=()=>{i.mutate(t.id,{onError:o=>{F.error(o.message)}})},u=o=>{l.mutate(o)},p=()=>{u({...t,done:!t.done})},f=()=>{u({...t,status_id:t.status_id===C.active?C.new:C.active,done:!1})},{value:k,setValue:g}=_t(t,u),y=i.isPending||l.isPending,S=()=>{switch(t.status_id){case C.active:return e.jsx(w,{className:M("task-input",!!r&&`task-input--prioriry-${r}`,{"task-input--done":!!s,"task-input--has-prioriry ":!!r}),value:k,disabled:y,onChange:o=>{g(o.target.value)},prefix:e.jsx(m,{icon:e.jsx($e,{className:M("task-icon-check-online",s&&"task-icon-check-online--checked")}),type:"text",onClick:p}),suffix:e.jsxs(c,{className:"task-input-actions",justify:"end",children:[e.jsx(m,{icon:e.jsx(Be,{}),type:"text"}),e.jsx(m,{icon:e.jsx(qe,{}),type:"text"}),e.jsx(m,{icon:e.jsx(he,{}),type:"text"}),e.jsx(m,{icon:e.jsx(De,{}),onClick:f,type:"text"}),e.jsx(m,{disabled:i.isPending,className:"action-delete",icon:e.jsx(le,{}),onClick:d,type:"text"})]})});case C.new:return e.jsx(w,{className:"task-input",value:k,onChange:o=>{g(o.target.value)},prefix:e.jsx(m,{icon:e.jsx(Ue,{}),onClick:f,type:"text"}),suffix:e.jsx(m,{icon:e.jsx(Me,{}),onClick:d,type:"text"})})}};return e.jsx(c,{justify:"space-between",align:"center",gap:16,children:S()})},Lt=({text:t,author_id:s,type_id:r})=>{const a=V(),n=P({mutationFn:_.createTask}),i=()=>{n.mutate({authorId:s,task:t,taskStatus:C.new,typeId:r},{onSuccess:async()=>{await a.invalidateQueries({queryKey:[O.tasks,s]}),F.success("Задача добавлена в 'Запланированные' ")}})};return e.jsx(c,{justify:"space-between",align:"center",gap:16,className:"task-completed-row",children:e.jsx(w,{className:"task-input",value:t,readOnly:!0,suffix:e.jsx(m,{onClick:i,icon:e.jsx(he,{}),shape:"circle",type:"text",loading:n.isPending})})})},ie=({title:t,total:s=0,complite:r=0,tasks:a,taskStatus:n,typeId:i})=>{const[l,d]=h.useState(!1),u=V(),[p]=v.useForm(),{user:f}=A(),{mutate:k,isPending:g}=P({mutationFn:async o=>await _.createTask(o),onSuccess(o){u.setQueryData([O.tasks,f.id],x=>[...x,o])}}),y=n===C.active,S=({task:o})=>{k({task:o,taskStatus:n,typeId:i,authorId:f.id},{onError:x=>{F.error(x.name)},onSuccess:async()=>{p.resetFields()}})};return e.jsxs(c,{vertical:!0,className:M({"task-field-wrapper":!0,"task-field-wrapper--active":y}),children:[e.jsx(Z,{count:r?`${r}/${s}`:s,offset:[20,12],className:M({"task-field-badge":!0,"task-field-badge--active":y}),children:e.jsxs(R.Text,{type:"secondary",children:[t,":"]})}),e.jsx(v,{onFinish:S,form:p,className:"task-field-form",children:e.jsx(v.Item,{noStyle:!0,name:"task",children:e.jsx(c,{onClick:()=>d(!0),onBlur:()=>d(!1),children:e.jsx(w,{disabled:g,className:M("task-input","task-input-create",y&&"task-input-create--active"),placeholder:l?"":"Создать задачу",prefix:l?e.jsx(ze,{style:{fontSize:16}}):e.jsx(Ge,{})})})})}),e.jsx("div",{className:"task-field-content",children:a.map(o=>e.jsx(Pt,{task:o},o.id))})]})},Ot=({active:t=!1,tasks:s=[],type:r,userId:a})=>{const[n,i]=h.useState(!1),{data:l=[],isFetching:d}=$({..._.getUserCompletedTasks(a,r),enabled:n});if(h.useEffect(()=>{!t&&n&&i(!1)},[t,n]),!t||!r)return;const u=ee[r],{activeTasks:p=[],newTasks:f=[]}=s.reduce((g,y)=>(y.status_id==="new"&&g.newTasks.push(y),y.status_id==="active"&&g.activeTasks.push(y),g),{newTasks:[],activeTasks:[]}),k=p.filter(({done:g})=>g).length;return e.jsxs(c,{className:"task-type-panel",vertical:!0,align:"start",gap:8,children:[e.jsxs(c,{className:"task-type-panel__content",vertical:!0,flex:1,children:[e.jsx(ie,{title:"В работе",complite:k,total:p.length,taskStatus:C.active,tasks:p,typeId:r}),e.jsx(ie,{title:"Запланированы",total:f.length,taskStatus:C.new,tasks:f,typeId:r})]}),e.jsxs(c,{className:"task-type-panel__float-buttons",vertical:!0,gap:4,children:[u&&e.jsx(ue,{content:e.jsx("div",{style:{width:500},children:u.info}),title:"Разяснение в помощь о текуших задач",children:e.jsx(m,{icon:e.jsx(Ve,{size:24}),size:"small",type:"text",shape:"circle"})}),e.jsx(m,{icon:e.jsx(Qe,{}),title:"Показать выполненные",size:"small",type:"text",shape:"circle",onClick:g=>{g.stopPropagation(),i(!0)}})]}),e.jsx(Ye,{title:e.jsxs(e.Fragment,{children:[e.jsx(R.Text,{type:"secondary",children:" Звершенные задачи : "}),e.jsx(Z,{count:l.length,color:"cyan"})]}),placement:"right",onClose:g=>{g.stopPropagation(),i(!1)},open:n,getContainer:!1,styles:{mask:{background:"none"},header:{padding:"0.5rem 1rem"},body:{padding:"0.5rem 1rem"}},children:e.jsx(c,{vertical:!0,gap:16,children:e.jsx(te,{spinning:d,children:[...l,...l].map((g,y)=>h.createElement(Lt,{...g,key:y}))})})})]})},At=({stats:t,onClick:s,active:r=!1,id:a,title:n})=>{const i=ee[a].icon||null;return e.jsxs(c,{className:M({"task-type-container":!0,"task-type-container--active":r}),vertical:!0,justify:"space-between",onClick:l=>{l.stopPropagation(),s==null||s(a)},children:[e.jsx(R.Title,{level:3,children:n}),e.jsxs(c,{justify:"space-between",children:[e.jsxs(c,{vertical:!0,children:[e.jsxs("span",{children:["Текущие: ",t.inWork]}),e.jsxs("span",{children:["Всего: ",t.all]})]}),i&&e.jsx(i,{style:{fontSize:32}})]})]})},{Content:Nt,Sider:Ut}=me,Mt=()=>{const[t,s]=h.useState(null),r=Q(),{taskGroups:a,userTasksIsLoading:n,userId:i}=Ft(),l=d=>{s(t===d?null:d)};return e.jsxs(me,{className:"tasks-page-layout",children:[e.jsx(Nt,{className:"task-page-content",onClick:()=>{s(null)},children:e.jsx(te,{spinning:n,children:e.jsx(c,{className:"task-page-container",children:a&&Object.keys(a).map(d=>e.jsx(At,{active:t===d,title:a[d].label,id:d,onClick:l,stats:a[d].stats},d))})})}),e.jsx(Ut,{className:M("tasks-page-sider ",!t&&"tasks-page-sider--collapsed"),trigger:null,collapsed:!t,collapsible:!0,defaultCollapsed:!0,collapsedWidth:0,width:"60%",children:e.jsx(Ot,{tasks:t?a[t].data:[],active:!!t,type:t,closeForm:()=>r(T.BASE),userId:i},t)})]})},$t=()=>{const t=Q();return e.jsxs(c,{align:"center",justify:"center",style:{position:"relative",width:"100%",height:"100%"},children:[e.jsx(m,{type:"text",icon:e.jsx(xe,{}),style:{position:"absolute",left:"0.2rem",top:"0.2rem"},title:"На главную",onClick:()=>{t(T.BASE)}}),e.jsx(ke,{})]})},Bt=()=>e.jsx(c,{className:"auth-layout-container",vertical:!0,gap:"middle",align:"center",justify:"center",children:e.jsxs(c,{className:"auth-layout-content",vertical:!0,align:"center",justify:"center",children:[e.jsx("h1",{children:"7S"}),e.jsx(ge,{})]})}),qt=({data:t})=>{const s=({payload:{value:r},textAnchor:a,x:n,y:i})=>(console.log(a),e.jsx("g",{transform:`translate(${n},${i})`,textAnchor:a,children:e.jsx("text",{x:0,y:0,dy:4,textAnchor:a,fontSize:24,fill:"var(--gray-9)",children:ee[r].title})}));return e.jsx(nt,{width:"100%",height:"100%",children:e.jsxs(rt,{cx:"50%",cy:"50%",outerRadius:"80%",data:t,children:[e.jsx(it,{}),e.jsx(ot,{dataKey:"type",tick:s}),e.jsx(ct,{stroke:"var(--gray-7)",angle:65}),e.jsx(lt,{name:"Mike",dataKey:"value",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6})]})})},Dt=t=>{const{data:s=[],isLoading:r}=$({..._.getTaskTypes(),refetchOnWindowFocus:!1,refetchOnMount:!1}),{data:a=[],isLoading:n}=$({..._.getUserCompletedTasks(t),refetchIntervalInBackground:!0,refetchInterval:5*pe,refetchOnWindowFocus:!1,enabled:!!t}),i=h.useMemo(()=>{const d={};return s.length&&s.forEach(u=>{d[u.id]||(d[u.id]=0)}),a.forEach(u=>{++d[u.type_id]}),d},[a,s]),l=Math.max(...Object.values(i))||7;return{taskTypes:s,userTasks:a,taskTypesIsLoading:r,userTasksIsLoading:n,taskGroupStats:i,maxPower:l}},{Title:zt}=R,ve=()=>{const t=Q(),r=et().reduce((a,n,i)=>{var l,d;return(l=n.handle)!=null&&l.title&&a.push(e.jsx(zt,{level:4,children:(d=n.handle)==null?void 0:d.title},i)),a},[]);return e.jsxs(c,{gap:8,align:"center",style:{borderBottom:"1px solid var(--gray-5)",paddingBottom:"0.2rem",minHeight:"fit-content"},children:[e.jsx(m,{type:"text",icon:e.jsx(xe,{}),onClick:()=>{t(T.BASE)}}),r]})},Gt=()=>{const{user:t}=A(),{taskGroupStats:s,maxPower:r}=Dt(t.id),a=Object.keys(s).length?Object.entries(s).map(([n,i])=>({type:n,value:i,fullMark:r})):[];return e.jsxs(c,{vertical:!0,flex:1,style:{height:"100%",width:"100%",padding:"0.2rem"},children:[e.jsx(ve,{}),e.jsx(qt,{data:a})]})},Vt=()=>e.jsxs("p",{children:["Привет! ",e.jsx("br",{}),"Данное приложение создано, как плод работы моих мыслей по поводу нашего бренного прибывания! ",e.jsx("br",{}),"- Кто я? Чего делаю и зачем ? В чем смысл?",e.jsx("br",{}),"- Насколько я близок с Богом?",e.jsx("br",{}),"- Что нужно делать? Как правильно двигаться? ",e.jsx("br",{}),"- Что я хочу и куда стремлюсь? ",e.jsx("br",{}),"- Что я делаю для развития? Доволен ли я результатом своих действий ?",e.jsx("br",{}),"- Что является движущий силой для меня?",e.jsx("br",{}),e.jsx("br",{}),"Если мысли эти Тебе чужды то возможно это приложение, которое создано впервую очередь как помошник мне в собственной жизни - не подойдет Тебе, в этом нет ничего страшного - значит у Тебя свой путь - ищи его ! и Удачи Тебе! Если в чем-то вопросы совпадают или Ты понимаешь ход моих мыслей, то читай далее... Аксимома - Принял тот факт, что ответом на все вопросы у меня нет, сей час точно, а может и не будет никогда...",e.jsx("br",{}),"Факт 1 - жизнь идет несмотря на то , нашел ли я ответы или нет и с этим надо что-то делать",e.jsx("br",{}),"Факт 2 - мне почему-то ничего не хочется, может потому что очень долго был зависимым или в базовой комплектации со мной что-то не так - суть имеем что имеем",e.jsx("br",{}),"Вывод - выделить оснонвые группы дел (как мне кажется) в течении жизни, которые спосоствуют гармоничному развитию личности (опять же по-моему мнению) чтобы двигаться по ним пока идет поиск ответов на вопросы, что ранее перечислил...",e.jsx("br",{}),"Итог: Созданы 7+1 направление (+1 потому то одну категорию - из опыта, надо включить позже, когда освоишься с системой и она войдет в Твою жизнь) которые надо сделать привычками(привычками потому что Факт2 - ничего не хочется=) ), это разовьет дисциплину, в дисциплина это всего хорошо. это всегда Сила Воли",e.jsx("br",{}),"Категории, что я выделил: Здоровье, Духовное-нравственное развитие, Взаимодействие с социумом, Развитие интеллеката, Бытовые дела, Развитие проффесиональное, Отдых (порядок - просто перечисление, не содержит приоретиацию)"]}),Qt=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Ежедневная забота о теле – основа всего."}),e.jsx("p",{children:"Утренняя зарядка, прогулка, питьевой режим, здоровый сон и питание дают энергию, укрепляют иммунитет и повышают стрессоустойчивость, позволяя эффективно справляться с любыми задачами."}),e.jsx("p",{children:"Например для меня, это стакан воды в день, утренняя зарядка с обливаниями, три раза в неделю упражнения\\бег, упражнения для глаз."})]}),Yt=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Социальные коммуникации."}),e.jsx("h3",{children:"Общение – фундамент эмоционального благополучия."}),e.jsx("p",{children:"Короткий разговор с близким, обед с коллегой или вежливый диалог с соседом поддерживают связи, дарят чувство принадлежности, помогают решать вопросы и снимают напряжение, делая жизнь насыщеннее.."}),e.jsx("p",{children:"Например для меня, это провести время с Семьей или позвонить Отцу, Брату, навестить Маму на работе, позвонить с другом."})]}),Kt=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:" Духовно-нравственная воспитание"}),e.jsxs("p",{children:["Сюда я вынес все то с чем мы сталиваемся в поисках ответов на след вопросы:",e.jsx("br",{}),"Кто я? Есть ли Бог? Быть или не быть? Что для меня важно и во что я верю и т.д.",e.jsx("br",{}),"Слово это все то, что помогает Вам познать себя, мир вокруг Вас от бесконечно малого во внутрь, до бесконечно большого во вне"]}),e.jsx("p",{children:"Работа над этим необходимо, как мне кажется, чтобы обрести некий фундамент осознанности в поступках и убеждений"}),e.jsxs("p",{children:["Не буду углублять в какую-то философию или религизность - это Ваше личное дело, Ваш личный путь...",e.jsx("br",{}),"Как пример: лично для меня сюда вошли утренние и вечерние молитвы, работа по 12 шаговой программе, дыхательные упражнения"]})]}),Wt=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Домашние дела."}),e.jsx("h3",{children:"Порядок вокруг создает порядок внутри."}),e.jsx("p",{children:"Быстрая уборка, мытье посуды, приготовление еды или раскладывание вещей по местам поддерживают комфортную среду, экономят время в будущем, снижают хаос и стресс, освобождая голову для важного."}),e.jsx("p",{children:"Например для меня, это все домашние дела которые могут возникнуть от поменять лампочки и наточить ножи до сделать навес над верандой, распечтать документы, оплатить домен, словом обычные бытовые дела которые должны быть сделаны."})]}),Ht=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Личностное-Профессиональное развитие"}),e.jsx("h3",{children:"Постоянное движение вперед – залог роста"}),e.jsx("p",{children:"Чтение профессиональной статьи, изучение нового навыка, планирование карьеры или работа над личными качествами (например, тайм-менеджмент) повышают компетентность, уверенность, открывают новые возможности и предотвращают застой."}),e.jsx("p",{children:"Например для меня, это чтение статьи по профессиональной сфере, создание этого и других приложений, подготовка докладов"})]}),Jt=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Интеллектуальные упражнения"}),e.jsx("h3",{children:"Тренировка для ума сохраняет его остроту"}),e.jsx("p",{children:"Разгадывание кроссворда, изучение иностранных слов, анализ прочитанного, решение логических задач или игра в шахматы стимулируют мозг, улучшают память, концентрацию и гибкость мышления, помогая находить нестандартные решения."}),e.jsx("p",{children:"Например для меня, это разгадывание судоку, филвордов, игры в го, решение задач на алгоритмы"})]}),Xt=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Время для себя"}),e.jsx("h3",{children:"Перезагрузка необходима для продуктивности."}),e.jsx("p",{children:". Сознательное безделье, любимое хобби, медитация, теплая ванна или просто тишина позволяют телу и психике восстановиться, предотвращают выгорание, восполняют ресурсы и дарят радость, делая остальное время более качественным."}),e.jsx("p",{children:"Например для меня, это просмотр мультиков, сериалов порой рисование - тут если честно мне трудно но в пути"})]}),Zt=()=>{const[t,s]=h.useState(null),r=n=>()=>{s(i=>i&&i.id===n.id?null:n)},a=t!=null&&t.info?es[t.id]:Vt;return e.jsxs(c,{vertical:!0,className:"info-page-wrapper",children:[e.jsx(ve,{}),e.jsxs(c,{className:"info-page-content-container",children:[e.jsx(c,{gap:8,className:"info-page-buttons",vertical:!0,children:Ke.map(n=>{const i=n.icon;return i?e.jsx(m,{type:"text",className:(t==null?void 0:t.id)===n.id?"info-page-button-active":"",icon:e.jsx(i,{}),title:n.title,onClick:r(n)},n.id):null})}),e.jsx(c,{className:"info-page-content-wrapper",justify:"center",children:e.jsxs(c,{className:"info-page-content",vertical:!0,gap:8,children:[e.jsx(R.Title,{level:1,children:(t==null?void 0:t.title)||"Зачем приложение нужно"}),a&&e.jsx(a,{})]})})]})]})},es={[U.soul]:Kt,[U.growth]:Ht,[U.health]:Qt,[U.life]:Wt,[U.mind]:Jt,[U.rest]:Xt,[U.social]:Yt},ts=[{Component:Bt,children:[{index:!0,async lazy(){const{SignIn:t}=await D(async()=>{const{SignIn:s}=await import("./signIn-D5sgSi_y.js");return{SignIn:s}},__vite__mapDeps([0,1,2,3,4,5,6,7]));return{Component:t}}},{path:T.SIGN_IN,async lazy(){const{SignIn:t}=await D(async()=>{const{SignIn:s}=await import("./signIn-D5sgSi_y.js");return{SignIn:s}},__vite__mapDeps([0,1,2,3,4,5,6,7]));return{Component:t}}},{path:T.SIGN_UP,async lazy(){const{SignUp:t}=await D(async()=>{const{SignUp:s}=await import("./signUp-Bc9ZRX2F.js");return{SignUp:s}},__vite__mapDeps([8,1,2,3,4,5,6]));return{Component:t}}},{path:T.RESET_PASSWORD,async lazy(){const{ResetPassword:t}=await D(async()=>{const{ResetPassword:s}=await import("./resetPassword-BTM_irIh.js");return{ResetPassword:s}},__vite__mapDeps([9,1,2,3,4,5,6]));return{Component:t}}},{path:T.UPDATE_PASSWORD,async lazy(){const{UpdatePassword:t}=await D(async()=>{const{UpdatePassword:s}=await import("./updatePassword-DkKMBV4w.js");return{UpdatePassword:s}},__vite__mapDeps([10,1,2,3,4,5,6]));return{Component:t}}},{path:"*",loader:()=>tt("/")}]}],ss=[{Component:Et,children:[{index:!0,Component:Mt},{path:T.STATISTIC,Component:Gt,handle:{title:"Статистика"}},{path:T.INFO,Component:Zt,handle:{title:"О Приложении"}},{path:"*",Component:$t}]}],as=()=>{const{isAuthCheking:t,user:s,isUserLoading:r}=A();if(t||r)return e.jsx(te,{fullscreen:!0});const a=st(s!=null&&s.id?ss:ts);return e.jsx(at,{router:a})};let z=document.getElementById("root");z||(z=document.createElement("div"),z.id="root",document.body.appendChild(z));be(z).render(e.jsx(h.StrictMode,{children:e.jsxs(Ie,{client:jt,children:[e.jsx(We,{theme:ft,locale:He,children:e.jsx(gt,{children:e.jsx(as,{})})}),e.jsx(we,{initialIsOpen:!1})]})}));export{A as u};
